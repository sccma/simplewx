$(function(){var t,a,e,i;0<$(".swiper-container").size()&&require(["swiper"],function(){new Swiper(".swiper-container",{pagination:".swiper-pagination",spaceBetween:30,centeredSlides:!0,autoplay:5e3,autoplayDisableOnInteraction:!1,loop:!0,mode:"horizontal",paginationClickable:!0,preloadImages:!1,lazyLoading:!0})}),(0<$(".js-audio-wx").size()||0<$(".js-audio-music").size())&&require(["jquery.jplayer"],function(){$(".js-audio-wx").each(function(){$(this).jPlayer({ready:function(t){$(this).jPlayer("setMedia",{mp3:window.sysinfo.attachurl+$("#"+$(this).attr("data-id")).attr("data-src")})},playing:function(){$("#"+$(this).attr("data-id")).find(".audio-time").show(),$("#"+$(this).attr("data-id")).find(".audioLoading").hide()},play:function(){$("#"+$(this).attr("data-id")).find(".audioLoading").show()},pause:function(){"true"==$("#"+$(this).attr("data-id")).attr("data-reload")&&$(this).jPlayer("stop")},swfPath:"../web/resource/components/jplayer",supplied:"mp3,wma,wav,amr",solution:"html, flash",preload:"none",smoothPlayBar:!0,cssSelectorAncestor:"#"+$(this).attr("data-id"),cssSelector:{play:".js-play",pause:".js-pause",duration:".audio-time"}})}),$(".js-audio-music").each(function(){$(this).jPlayer({ready:function(t){$(this).jPlayer("setMedia",{mp3:window.sysinfo.attachurl+$("#"+$(this).attr("data-id")).attr("data-src")}),$(this).jPlayer("option",{loop:"true"==$("#"+$(this).attr("data-id")).attr("data-loop")})},playing:function(){$("#"+$(this).attr("data-id")).find(".audio-time").show(),$("#"+$(this).attr("data-id")).find(".audioLoading").hide(),$("#"+$(this).attr("data-id")).animate({height:"58px"})},play:function(){$("#"+$(this).attr("data-id")).find(".audioLoading").show()},pause:function(){"true"==$("#"+$(this).attr("data-id")).attr("data-reload")&&$(this).jPlayer("stop")},swfPath:"../web/resource/components/jplayer",supplied:"mp3,wma,wav,amr",solution:"html, flash",preload:"none",smoothPlayBar:!0,cssSelectorAncestor:"#"+$(this).attr("data-id"),cssSelector:{play:".js-play",pause:".js-pause",stop:".js-stop",currentTime:".audio-current-time",duration:".audio-duration",playBar:".slider-fill",seekBar:".slider-bar"}})})}),$(".notice-box").each(function(){var t=0,a=$(this).find(".js-scroll-notice"),e=$(this);setInterval(function(){--t+a.width()<0&&(t=e.width()),a.css({left:t})},25)}),$(".js-quickmenu div").removeClass("on"),$(".js-quickmenu .js-quickmenu-toggle").click(function(){$(this).hasClass("on")?($(this).removeClass("on"),$(".js-quickmenu .nav-group-item").removeClass("on")):($(this).addClass("on"),$(".js-quickmenu .nav-group-item").addClass("on"))}),$(".js-quickmenu a[data-toggle='dropdown']").click(function(){$(this).hasClass("on")?($(this).removeClass("on"),$(this).next("dl").hide()):($(".js-quickmenu a[data-toggle='dropdown']").removeClass("on"),$(".js-quickmenu dl").hide(),$(this).addClass("on"),$(this).next("dl").show())}),$(function(){$("form.js-ajax-form").submit(function(t){return $(this).data("submit",1),$('button[type="submit"]').prop("disabled",!0),$.ajax(this.action,{method:this.method.toUpperCase(),data:new FormData(this),cache:!1,processData:!1,contentType:!1,dataType:"json"}).done(function(t){$(this).data("submit",0),"success"==t.type?util.toast(t.message,t.redirect,"success"):(util.toast(t.message,"","error"),$('button[type="submit"]').prop("disabled",!1),util.toast(t.message,t.redirect,"error"))}).fail(function(t){$(this).data("submit",0),util.toast("操作失败，请重试","","error")}),t.preventDefault(),!1})}),(0<$(".panes").size()||0<$(".mc-we7-home").size())&&(t=1,i=320/568<(i=window.screen.width)/(e=window.screen.height)?(a=(i/(t=e/568)-320)/2,"320px"):(t=i/320,"100%"),window!=window.top&&$(".container").css({width:"100%",height:"100%",overflow:"hidden","transform-origin":"top left",transform:"scale("+t+")"}),$(".container div").eq(0).css({width:i,marginLeft:a}),$("meta[name='viewport']").attr("content","width=320, initial-scale="+t+", maximum-scale="+t+", user-scalable=no")),0<$(".panes").size()&&require(["hammer"],function(r){1==$(".pane").size()&&$("body").css({overflow:"hidden"});var o=0,d=0,c=0;$("div[type]");$("div[type]").each(function(){var t,a=$(this).attr("type").substring(0,3),e=(t="adi"===a?$(this).find("div[class='app-adImg']"):$(this).find("div[class^='app-"+a+"']")).attr("style"),a=e.match(/animation\:(?:\s*)(\w+)\s+\d+/);null!==a&&t.data("animateName",a[1]),t.data("animateName")&&(e=e.replace(/(-(?:webkit|moz|o|ms)-)?animation\:(?:\s*)(?:\w+)\s+(\d+)/g,"$1animation: noEffect $2"),t.attr("style",e))});window[r.prefixed(window,"requestAnimationFrame")];function l(t,a,e){return t&r.DIRECTION_HORIZONTAL?a:e}function t(t,a){this.container=t,this.direction=a,this.panes=Array.prototype.slice.call($(this.container).children(".pane"),0),this.containerSize=this.container[l(a,"offsetWidth","offsetHeight")],this.currentIndex=0,this.hammer=new r.Manager(this.container),this.hammer.add(new r.Pan({direction:this.direction,threshold:10})),this.hammer.on("panstart panmove panend pancancel",r.bindFn(this.onPan,this)),this.show(this.currentIndex)}t.prototype={show:function(t,a,e,i){e=e||0,t=t>this.panes.length-1?0:t<0?this.panes.length-1:Math.max(0,Math.min(t,this.panes.length-1));var n,s=this.container.className;for(i?-1===s.indexOf("animate")&&(this.container.className+=" animate"):-1!==s.indexOf("animate")&&(this.container.className=s.replace("animate","").trim()),n=0;n<this.panes.length;n++){var o=this.containerSize/100*(100*(n-t)+e),o=this.direction&r.DIRECTION_HORIZONTAL?"translate3d("+o+"px, 0, 0)":"translate3d(0, "+o+"px, 0)";this.panes[n].style.transform=o,this.panes[n].style.mozTransform=o,this.panes[n].style.webkitTransform=o,t!=a&&(a==n&&$(".pane").eq(n).find("div[type]").each(function(){var t,a=$(this).attr("type").substring(0,3),a=(t="adi"===a?$(this).find("div[class='app-adImg']"):$(this).find("div[class^='app-"+a+"']")).attr("style").replace(/(-(?:webkit|moz|o|ms)-)?animation\:(?:\s*)(?:\w+)\s+(\d+)/g,"$1animation: noEffect $2");t.attr("style",a)}),t==n&&$(".pane").eq(n).find("div[type]").each(function(){var t,a=$(this).attr("type").substring(0,3),e=(t="adi"===a?$(this).find("div[class='app-adImg']"):$(this).find("div[class^='app-"+a+"']")).attr("style"),a=t.data("animateName"),a=e.replace(/(-(?:webkit|moz|o|ms)-)?animation\:(?:\s*)(?:\w+)\s+(\d+)/g,"$1animation: "+a+" $2");t.attr("style",a)}))}this.currentIndex=t},onPan:function(t){if(1==$(".pane").size()){$("body").css({overflow:"hidden"});var a=$(".panes").parent().css("height"),e=t.deltaY-o;if(d+=e,(c-=e)<0)return o=d=c=0,!1;if(c+568>parseInt(a))return c=parseInt(a)-568,d=-(parseInt(a)-568),o=0,!1;if(parseInt(a)>Math.abs(c)&&0<=c){var i=$(".alock");if(0<i.length)for(var n=0;n<i.length;n++)$(i.get(n)).parent("div").css({transform:"translate3d(0, "+-d+"px, 0)","-moz-transform":"translate3d(0, "+-d+"px, 0)","-webkit-transform":"translate3d(0, "+-d+"px, 0)","z-index":"2"});$(".pane").css({transform:"translate3d(0, "+-c+"px, 0)","-moz-transform":"translate3d(0, "+-c+"px, 0)","-webkit-transform":"translate3d(0, "+-c+"px, 0)","z-index":"1"})}o=t.deltaY||0,"panend"!=t.type&&"pancancel"!=t.type||(o=0)}else{var s=l(this.direction,t.deltaX,t.deltaY),e=100/this.containerSize*s,a=!1,s=this.currentIndex;"panend"!=t.type&&"pancancel"!=t.type||(10<Math.abs(e)&&"panend"==t.type&&(this.currentIndex+=e<0?1:-1),a=!(e=0)),this.show(this.currentIndex,s,e,a)}}},new t(document.querySelector(".panes"),r.DIRECTION_VERTICAL).hammer.get("pan"),$(window).on("scroll.elasticity",function(t){t.preventDefault()}).on("touchmove.elasticity",function(t){t.preventDefault()}),$(window).delegate("img","mousemove",function(t){t.preventDefault()})})});