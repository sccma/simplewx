<?php
 goto JYk0C; lf72o: if (!($action == "\x67\x65\164\x5f\163\x69\x74\145\x69\x6e\146\157")) { goto jW03v; } goto T584M; aHHVV: function we7_db() { goto GDTVm; ALY5P: $cookie["\x75\151\144"] = $link->lastInsertId(); goto bPlHS; lJuXr: $dbfile = IA_INSTALL_ROOT . "\x2f\x64\x61\164\x61\x2f\144\142\x2e\x70\x68\x70"; goto zJHRT; nKFia: $password = sha1("{$user["\160\x61\163\163\167\x6f\x72\144"]}\55{$salt}\55{$authkey}"); goto QQXgu; mf4V8: return true; goto gwQzU; DoXCa: K6Fvm: goto OLWwC; Gaavi: setcookie("{$cookiepre}\x5f\x5f\163\145\x73\163\151\157\x6e", $session, 0, "\x2f", '', $secure, true); goto mf4V8; lZkla: wjtpg: goto tBH6X; WvONS: require IA_INSTALL_ROOT . "\57\x64\141\x74\x61\x2f\143\x6f\156\146\151\147\56\160\150\x70"; goto nSARE; dwsqT: return "\345\256\x89\xe8\xa3\x85\345\214\205\344\xb8\x8d\346\255\243\347\xa1\256\54\40\346\x95\260\346\x8d\256\345\xae\x89\xe8\243\205\xe8\x84\232\346\234\xac\xe7\274\272\xe5\244\261\56"; goto nysfZ; K5c3Y: $engines = $link->query("\x53\x48\x4f\127\40\x45\x4e\x47\111\x4e\105\123\x3b"); goto EC4zd; bPlHS: $cookie["\150\x61\163\x68"] = md5($password . $salt); goto cEDCs; rqdwz: $cookie = array("\154\141\163\164\166\151\163\x69\164" => '', "\154\141\163\x74\151\160" => ''); goto ALY5P; EC4zd: $all_engines = $engines->fetchAll(); goto EtD7G; mrEAO: $link = new PDO("\155\x79\x73\x71\x6c\x3a\x64\x62\156\x61\155\145\x3d{$db["\x6e\x61\x6d\145"]}\x3b\x68\x6f\x73\x74\75{$db["\x73\145\162\x76\145\162"]}\73\160\157\162\164\x3d{$db["\160\157\x72\x74"]}", $db["\x75\x73\145\162\x6e\x61\x6d\145"], $db["\160\x61\x73\163\x77\x6f\x72\144"]); goto PV75W; J0SxM: $secure = $is_https ? 1 : 0; goto Gaavi; TBM8C: $support_innodb = false; goto K5c3Y; N4bCE: $user = array("\x75\x73\x65\162\156\141\x6d\x65" => "\x61\x64\x6d\151\156", "\160\x61\x73\x73\167\x6f\x72\144" => "\x31\62\x33\64\x35\x36"); goto R_QEb; GDTVm: global $is_https; goto N2oya; UmRFF: rJrZo: goto N4bCE; EtD7G: foreach ($all_engines as $engine) { goto Wkrsp; HFA7o: zG9Is: goto ZHS2o; ZHS2o: bnKz3: goto imyRO; MeXs9: $support_innodb = true; goto HFA7o; Wkrsp: if (!(strtolower($engine["\105\x6e\147\x69\156\x65"]) == "\151\156\156\157\144\142" && in_array(strtolower($engine["\x53\165\160\x70\x6f\162\164"]), array("\144\145\146\x61\x75\x6c\x74", "\x79\145\x73")))) { goto zG9Is; } goto MeXs9; imyRO: } goto DoXCa; BUF3r: if (!(empty($dat) || !is_array($dat))) { goto GaoKS; } goto dwsqT; wfk2n: $dat = (require $dbfile); goto BUF3r; B6fa0: $authkey = $config["\163\145\164\164\151\x6e\147"]["\x61\x75\164\x68\153\145\171"]; goto mrEAO; QQXgu: $link->exec("\111\x4e\x53\105\x52\x54\x20\111\116\x54\117\40{$db["\x70\x72\145\146\x69\170"]}\165\x73\145\162\163\x20\50\x75\x73\145\162\156\x61\155\x65\x2c\40\160\x61\163\163\x77\x6f\162\144\54\x20\163\141\x6c\164\54\x20\152\157\151\x6e\x64\141\164\145\54\x20\x67\162\157\165\160\151\x64\54\40\x73\x74\141\x74\x75\163\54\x20\x66\x6f\x75\156\x64\x65\162\x5f\147\162\x6f\165\x70\151\x64\54\40\151\163\x5f\x62\x69\156\144\x29\x20\126\x41\x4c\125\x45\x53\50\x27{$user["\x75\x73\x65\162\156\141\155\x65"]}\x27\x2c\40\x27{$password}\x27\54\40\47{$salt}\x27\54\x20\x27" . time() . "\x27\54\x20\x31\x2c\x20\x32\54\x20\x31\54\x20\60\x29"); goto rqdwz; nysfZ: GaoKS: goto TBM8C; qE6_M: mMRMf: goto wfk2n; X5rJ0: $link->exec("\123\105\124\x20\163\161\154\137\155\157\144\145\x3d\x27\x27"); goto lJuXr; nxyj9: return "\xe5\256\211\350\243\205\345\x8c\x85\xe4\xb8\x8d\xe6\xad\xa3\xe7\241\256\x2e"; goto Dfp2q; R_QEb: $salt = local_salt(8); goto nKFia; cEDCs: $session = install_authcode(json_encode($cookie), "\145\156\143\x6f\144\145", $authkey); goto J0SxM; VbWwq: $cookiepre = $config["\143\157\157\153\151\x65"]["\x70\x72\145"]; goto B6fa0; Dfp2q: goto rJrZo; goto qE6_M; nSARE: $db = array("\163\145\x72\x76\145\162" => $config["\x64\142"]["\x6d\141\163\x74\145\x72"]["\150\157\x73\164"], "\x70\x6f\x72\x74" => $config["\x64\142"]["\155\x61\163\164\x65\162"]["\x70\x6f\x72\164"], "\x75\x73\x65\162\156\141\x6d\x65" => $config["\x64\x62"]["\x6d\141\x73\x74\x65\x72"]["\165\163\x65\x72\x6e\x61\x6d\x65"], "\160\141\163\163\167\x6f\162\x64" => $config["\x64\142"]["\155\x61\163\164\145\x72"]["\160\141\x73\x73\167\157\162\x64"], "\160\x72\145\x66\151\170" => $config["\144\x62"]["\x6d\141\163\x74\x65\x72"]["\x74\141\x62\x6c\145\160\x72\145"], "\x6e\141\x6d\145" => $config["\144\142"]["\x6d\x61\x73\x74\x65\x72"]["\144\141\164\141\x62\x61\x73\145"]); goto VbWwq; zJHRT: if (file_exists(IA_INSTALL_ROOT . "\57\151\156\144\x65\170\56\160\150\x70") && is_dir(IA_INSTALL_ROOT . "\x2f\x77\x65\142") && file_exists(IA_INSTALL_ROOT . "\57\146\x72\141\155\x65\167\157\x72\x6b\x2f\x76\x65\162\x73\151\x6f\156\56\151\x6e\143\56\x70\150\160") && file_exists($dbfile)) { goto mMRMf; } goto nxyj9; moGLO: zISDv: goto UmRFF; N2oya: define("\x49\x4e\x5f\111\x41", true); goto WvONS; PV75W: $link->exec("\123\105\x54\40\143\x68\141\162\x61\x63\164\x65\162\137\x73\x65\x74\x5f\143\x6f\x6e\x6e\145\143\164\x69\157\x6e\x3d\x75\164\x66\x38\x2c\x20\143\x68\x61\162\x61\143\164\145\162\x5f\x73\x65\164\x5f\x72\145\x73\165\x6c\x74\x73\75\165\164\146\70\x2c\x20\x63\x68\141\162\x61\143\x74\x65\162\137\163\145\x74\137\143\154\151\145\156\x74\75\x62\x69\x6e\x61\x72\x79"); goto X5rJ0; tBH6X: foreach ($dat["\x64\141\164\141\163"] as $data) { local_run($data, $link, $db); HP1Sw: } goto moGLO; OLWwC: foreach ($dat["\163\143\x68\145\155\141\163"] as $schema) { goto ng_mx; d0uBh: local_run($sql, $link, $db); goto D2ntH; ng_mx: $sql = local_create_sql($schema, $support_innodb); goto d0uBh; D2ntH: NT2oz: goto YLanq; YLanq: } goto lZkla; gwQzU: } goto qO8Um; QdSBX: exit(we7_error(400, $data["\x65\x72\x72\157\162"])); goto ws67r; EosQP: a3Rnh: goto xEQUZ; L4MGh: YV2n4: goto XM8Bh; eQ2Y6: function we7_update_user($username, $password) { goto WisyE; MO4sQ: $cookie = array("\154\x61\x73\x74\166\x69\x73\151\164" => '', "\154\141\163\x74\x69\160" => ''); goto VOudP; yRoGJ: $session = install_authcode(json_encode($cookie), "\145\x6e\143\x6f\x64\145", $_W["\143\157\x6e\146\x69\147"]["\163\x65\x74\164\x69\x6e\147"]["\141\165\164\150\153\x65\171"]); goto GH0Y6; VOudP: $cookie["\x75\151\x64"] = $userinfo["\165\x69\x64"]; goto KfuHJ; UYLwA: $password = user_hash($password, $userinfo["\x73\x61\154\x74"]); goto agg2c; EzJHW: $userinfo = pdo_get("\x75\163\x65\162\163", array("\x75\163\145\162\156\141\x6d\x65" => "\x61\144\x6d\x69\156")); goto UYLwA; GH0Y6: $secure = $is_https ? 1 : 0; goto CRjwo; KOy8_: return $result ? true : false; goto J8ZS0; CRjwo: setcookie($_W["\143\157\156\146\151\x67"]["\x63\x6f\x6f\153\151\145"]["\160\x72\x65"] . "\x5f\137\x73\x65\x73\x73\x69\x6f\156", $session, 0, "\57", '', $secure, true); goto KOy8_; WisyE: global $_W, $is_https; goto GFMdr; GFMdr: load()->model("\x75\163\x65\162"); goto EzJHW; KfuHJ: $cookie["\x68\x61\163\x68"] = md5($password . $userinfo["\x73\141\x6c\x74"]); goto yRoGJ; agg2c: $result = pdo_update("\x75\x73\x65\x72\163", array("\165\x73\145\162\x6e\141\155\x65" => $username, "\x70\x61\163\x73\167\x6f\x72\x64" => $password), array("\165\x69\x64" => $userinfo["\x75\x69\x64"])); goto MO4sQ; J8ZS0: } goto Z6jQ7; BRezj: Q2u5n: goto V6OpV; fC7xi: $db_prefix = trim($_POST["\160\x72\145\146\151\170"]); goto V4Vfw; VqtAz: define("\101\120\111\x5f\123\111\x54\105\x5f\x52\105\107\111\123\x54\105\x52\137\x45\x58\111\x53\x54", API_HOST . "\57\x73\x69\x74\x65\x2f\162\145\x67\x69\163\x74\145\162\x2f\x65\x78\x69\163\x74"); goto KcvG3; NnQeh: $action = trim($_GET["\163\164\x65\160"]); goto CGoXS; SUqJg: $handle_result = we7_handle_chunk(); goto vnGVm; frWGf: hC9o1: goto VbheQ; jAKF6: if (!(version_compare(PHP_VERSION, "\65\x2e\x33\x2e\x30") == -1)) { goto iUjds; } goto EnyWD; BmPXN: F4aWj: goto GOHiO; DVbaU: $ret["\141\163\x70\137\164\141\x67\163"]["\x72\145\x73\165\x6c\164"] = "\x61\x73\160\x5f\164\141\147\163\345\274\x80\xe5\220\xaf\xe7\212\xb6\xe6\200\201"; goto frWGf; Y4GDz: if (!($action == "\x64\x6f\167\x6e\x6c\x6f\x61\x64")) { goto UQrwh; } goto KJPlT; e5rqs: $ret["\165\160\x6c\x6f\x61\x64"]["\162\145\163\165\154\164"] = $server["\x75\160\154\x6f\141\x64"]; goto wGFzY; wyDy3: $result = intval($download_size / $source_size * 100); goto TVu_0; PSZUh: goto PFebF; goto JXl_9; aUnDk: exit(we7_error(432, "\xe8\xaf\267\345\x85\x88\xe8\216\xb7\xe5\217\x96\345\210\x86\345\x8d\267\346\200\xbb\351\x87\217\x2e")); goto gUmbK; ytejS: goto LQs82; goto URpYL; JJMJh: eWNH4: goto d9XhX; SpMbN: exit(we7_error(400, "\xe4\277\xae\xe6\x94\xb9\347\xab\x99\xe7\x82\xb9\xe5\x90\x8d\xe7\xa7\xb0\345\xa4\xb1\xe8\264\245\56")); goto TG5cw; DBoBQ: $ret["\x61\x73\160\137\x74\x61\x67\163"]["\146\141\x69\154\145\x64"] = true; goto wpl3Z; dCGzr: jzOvj: goto PSZUh; HkqQ5: goto ZNs2k; goto swp7I; Tq0EC: $output = fread($hostfile, 8192); goto mSlML; U5uSO: $actions = array("\x63\x68\x65\x63\x6b\137\163\151\x74\145", "\157\x61\165\x74\x68", "\145\156\x76\x69\x72\157\x6e\155\x65\156\164", "\x69\156\x73\x74\x61\154\154", "\x63\x68\165\156\153\164\x6f\164\x61\154", "\x64\x6f\x77\x6e\x6c\x6f\141\144\137\160\145\x72\x63\145\x6e\164", "\144\157\x77\156\154\157\141\144", "\151\x6e\163\164\141\x6c\x6c", "\162\145\x67\x69\163\164\145\162\137\143\141\154\154\142\141\143\153", "\154\x6f\x67\x69\156", "\147\x65\164\x5f\x73\151\164\x65\151\156\146\157"); goto NnQeh; pvDwx: exit(we7_error(400, "\143\150\x75\156\153\xe5\xa4\xa7\xe4\272\x8e\346\x9c\x80\xe5\244\xa7\345\200\xbc")); goto b42sd; qqojm: $username = trim($_POST["\x75\163\145\162\156\141\x6d\x65"]); goto NW5H1; NMg9R: $db_name = trim($_POST["\156\x61\155\x65"]); goto fC7xi; ai7is: touch(IA_INSTALL_ROOT . "\x2f\x64\x61\164\141\57\x64\142\56\154\x6f\x63\x6b"); goto D9dwb; x4SRg: goto dF_XW; goto YWhkN; Qv8FW: clearstatcache(); goto EVW8W; JNsK5: exit(we7_error(421, "\345\256\211\xe8\243\205\xe5\x8c\205\xe4\xb8\215\xe5\xae\x8c\xe6\225\xb4\56")); goto ueNt1; SpTqK: $sitepath = str_replace("\x2f\151\x6e\x73\x74\141\154\154\56\160\150\160", '', $sitepath); goto AYVOG; i2J_b: if (!(is_array($data) && isset($data["\145\x72\162\157\162"]))) { goto tB0a4; } goto U3uhF; elIZl: XP2BR: goto LZGuu; DzyXy: if (!(is_array($data) && isset($data["\x65\x72\x72\x6f\x72"]))) { goto xWnSY; } goto IwsYk; rpGGI: zYgV5: goto lf72o; kSd2Q: $ret["\x73\145\163\x73\x69\157\x6e"]["\162\x65\x73\x75\154\164"] = "\347\263\273\347\xbb\x9f\x73\145\163\x73\x69\x6f\x6e\56\x61\165\x74\x6f\137\163\164\141\x72\164\xe5\274\x80\xe5\220\xaf"; goto BmPXN; Oprpk: exit(we7_error(0, "\163\165\143\143\145\x73\x73")); goto uL1CK; IzD1H: $ret["\146\157\x70\x65\156"]["\162\x65\163\x75\154\x74"] = "\xe4\xb8\x8d\346\224\257\xe6\x8c\201\x66\157\x70\145\x6e"; goto LPJ88; jVVJ5: if (!empty($source_size)) { goto TNZr0; } goto K3150; w09FF: CsS24: goto rMX7t; YWhkN: oVwby: goto jgLaR; jPf32: we7_setcookie("\143\144\156\137\163\x6f\165\162\143\x65\x5f\163\x69\x7a\145", $source_size); goto mWQsA; F8CBY: $i++; goto viNT6; wpHHw: if ($user_result) { goto Gvzej; } goto urnzd; swp7I: qWGjE: goto CNfkJ; DMxcM: if ($registered_site == 1) { goto uhsHa; } goto bbHAx; rLrxz: define("\103\x4f\117\113\x49\x45\x5f\x50\122\x45", "\x77\x65\67\151\x6e\x73\x74\141\x6c\154\137"); goto m_R7B; KK0cB: $ret["\x64\141\164\x61"]["\146\x61\x69\x6c\x65\144"] = true; goto CHTUv; fAQmO: if (!(version_compare(PHP_VERSION, "\x37\56\x30\56\x30") == -1 && version_compare(PHP_VERSION, "\65\56\66\x2e\60") >= 0)) { goto yA3b3; } goto HzIiI; knO62: exit(we7_error(0, $chunk_num)); goto WisVE; rwpgl: if (!empty($chunk_total)) { goto apqCg; } goto aUnDk; YTlbG: $filename = IA_INSTALL_ROOT . "\57\x63\150\165\156\153\137" . $chunk_num; goto vFaEq; jJPHd: if (!(!file_exists(IA_INSTALL_ROOT . "\57\144\141\x74\141\57\x69\156\x73\164\141\154\154\x2e\154\157\143\153") && !$registered_site && !$local_install)) { goto AYLyA; } goto cI9BC; clNkq: $ret["\x66\157\x70\x65\156"]["\x6e\141\x6d\145"] = "\x66\157\x70\x65\x6e"; goto IzD1H; HXPB6: function local_config() { $cfg = "\74\x3f\160\x68\x70\15\12\144\145\146\151\x6e\x65\x64\50\x27\111\116\x5f\x49\101\47\x29\x20\x6f\x72\40\x65\x78\151\164\50\47\x41\x63\x63\x65\163\163\x20\104\145\156\x69\x65\144\x27\51\x3b\15\12\xd\xa\x24\143\157\x6e\146\151\x67\40\x3d\x20\141\x72\x72\x61\171\50\x29\x3b\xd\12\15\12\x24\143\x6f\x6e\146\x69\147\x5b\47\x64\142\47\135\x5b\47\155\141\163\164\x65\x72\47\x5d\133\47\x68\x6f\x73\164\x27\135\x20\x3d\40\x27\173\144\142\x2d\163\x65\x72\166\145\x72\x7d\47\x3b\15\12\x24\143\157\x6e\146\x69\147\x5b\x27\144\142\x27\135\133\x27\155\141\x73\x74\x65\162\x27\x5d\x5b\x27\x75\x73\145\x72\x6e\141\x6d\x65\47\135\x20\x3d\40\47\173\144\x62\x2d\x75\163\x65\162\156\141\x6d\145\x7d\x27\x3b\15\xa\44\x63\x6f\156\x66\x69\x67\133\x27\x64\x62\x27\135\x5b\x27\x6d\x61\163\x74\145\162\x27\135\133\x27\x70\x61\x73\x73\167\x6f\162\x64\x27\135\x20\75\40\47\173\x64\x62\x2d\x70\x61\x73\x73\167\157\x72\x64\x7d\47\73\15\xa\44\143\x6f\156\x66\151\x67\x5b\x27\144\x62\47\135\133\47\155\141\x73\x74\145\x72\x27\135\x5b\47\160\x6f\162\164\x27\135\40\x3d\x20\x27\x7b\144\x62\55\x70\x6f\x72\x74\x7d\47\73\xd\12\x24\143\x6f\156\146\x69\x67\x5b\47\x64\x62\x27\x5d\133\47\155\x61\x73\164\145\x72\47\135\133\x27\144\x61\x74\141\142\141\163\145\47\135\40\x3d\40\x27\173\144\142\x2d\156\141\155\145\175\47\x3b\xd\xa\x24\143\157\x6e\146\151\x67\133\47\x64\142\x27\x5d\x5b\x27\155\141\x73\164\x65\x72\47\135\x5b\x27\143\x68\x61\x72\163\x65\164\47\x5d\40\x3d\x20\47\165\x74\x66\x38\47\x3b\15\xa\x24\x63\x6f\156\x66\151\147\x5b\47\144\x62\x27\135\133\47\x6d\x61\x73\164\145\x72\47\x5d\133\47\x70\x63\157\x6e\156\x65\143\x74\x27\x5d\x20\x3d\x20\60\x3b\xd\xa\x24\143\x6f\x6e\x66\x69\147\x5b\x27\x64\142\47\135\x5b\47\x6d\141\163\x74\x65\162\47\x5d\133\x27\x74\141\142\154\145\160\x72\x65\47\x5d\40\75\x20\47\x7b\144\142\55\164\x61\x62\154\x65\160\162\145\175\47\73\15\xa\15\xa\x24\x63\157\x6e\x66\151\147\133\x27\x64\x62\47\x5d\x5b\47\163\x6c\141\x76\145\137\x73\x74\x61\164\165\x73\47\135\x20\75\x20\x66\x61\154\163\x65\x3b\xd\12\44\143\157\x6e\x66\x69\x67\x5b\47\x64\x62\47\135\133\47\x73\154\x61\166\145\47\135\133\x27\x31\47\x5d\133\47\150\157\x73\x74\47\135\40\x3d\40\x27\x27\x3b\15\12\44\143\157\156\x66\151\x67\133\47\x64\142\x27\135\133\x27\x73\154\x61\x76\145\x27\x5d\x5b\47\x31\x27\x5d\133\x27\165\x73\x65\x72\x6e\141\x6d\145\47\x5d\x20\75\x20\47\47\73\xd\xa\44\x63\x6f\x6e\x66\x69\x67\x5b\x27\x64\x62\x27\135\133\47\163\154\141\166\x65\47\135\x5b\x27\x31\x27\x5d\133\x27\160\141\163\x73\167\x6f\162\144\x27\x5d\x20\75\x20\47\x27\73\15\xa\x24\143\157\x6e\x66\151\147\133\x27\144\142\x27\135\133\47\163\x6c\x61\x76\145\47\x5d\133\x27\61\47\135\133\x27\160\x6f\162\x74\x27\x5d\40\75\x20\x27\x33\x33\60\67\47\x3b\15\xa\x24\143\157\156\146\151\x67\133\47\144\142\x27\135\133\47\163\x6c\141\166\x65\47\x5d\x5b\x27\x31\x27\135\133\x27\144\141\x74\x61\142\x61\163\x65\x27\135\40\x3d\x20\x27\47\x3b\15\xa\x24\143\x6f\156\146\151\147\x5b\47\144\142\x27\135\x5b\47\163\x6c\x61\166\145\47\x5d\133\47\61\x27\135\133\x27\143\150\x61\x72\x73\x65\x74\x27\135\40\75\40\x27\x75\x74\146\70\x27\x3b\15\xa\44\143\157\156\x66\x69\x67\x5b\x27\x64\142\x27\x5d\x5b\47\x73\154\141\x76\x65\x27\x5d\x5b\47\x31\x27\x5d\x5b\x27\160\143\157\x6e\156\x65\143\164\x27\x5d\40\75\x20\x30\73\xd\xa\44\143\x6f\x6e\x66\x69\x67\x5b\x27\x64\x62\47\x5d\133\x27\163\x6c\x61\166\145\47\x5d\133\47\x31\x27\x5d\133\47\x74\x61\x62\x6c\x65\160\x72\x65\x27\x5d\x20\x3d\40\47\x69\155\163\x5f\x27\73\15\xa\x24\x63\157\156\x66\151\147\133\47\144\x62\47\135\133\x27\x73\x6c\141\x76\145\47\x5d\x5b\x27\61\x27\135\x5b\47\167\x65\151\147\150\164\x27\135\x20\x3d\x20\x30\x3b\15\12\15\xa\x24\143\x6f\156\x66\x69\147\x5b\47\x64\142\x27\135\x5b\x27\143\x6f\155\155\157\156\x27\135\x5b\47\x73\x6c\x61\166\x65\x5f\x65\x78\143\x65\x70\x74\137\164\141\x62\x6c\x65\x27\135\40\x3d\40\141\x72\x72\x61\171\50\47\143\x6f\162\x65\x5f\x73\145\x73\163\x69\x6f\156\163\47\51\x3b\xd\12\xd\12\57\x2f\40\55\x2d\x2d\x2d\x2d\x2d\x2d\55\x2d\x2d\x2d\x2d\55\55\55\55\55\x2d\55\55\x2d\55\x2d\55\x2d\55\x20\40\103\117\116\x46\x49\107\40\103\x4f\x4f\113\111\x45\40\40\55\x2d\55\55\55\x2d\55\55\55\55\x2d\x2d\x2d\55\x2d\55\x2d\55\x2d\x2d\x2d\55\55\x2d\x2d\55\55\x20\x2f\x2f\xd\12\44\143\x6f\x6e\x66\x69\x67\133\47\143\x6f\x6f\153\151\145\47\x5d\133\x27\x70\162\145\x27\135\40\x3d\x20\47\173\143\x6f\157\153\151\x65\160\162\x65\175\47\73\15\xa\44\x63\157\156\146\x69\x67\x5b\x27\143\x6f\157\153\x69\x65\x27\x5d\x5b\47\x64\157\x6d\141\151\x6e\x27\135\x20\x3d\x20\x27\47\x3b\xd\12\44\143\157\156\146\151\147\x5b\47\x63\157\157\x6b\151\145\47\x5d\x5b\47\x70\x61\x74\x68\x27\135\40\x3d\x20\47\x2f\x27\x3b\xd\12\15\12\57\x2f\40\55\x2d\55\x2d\x2d\x2d\55\55\x2d\55\x2d\55\55\x2d\x2d\55\55\55\55\55\x2d\55\x2d\55\55\x2d\40\40\103\x4f\116\106\111\x47\40\123\105\x54\x54\111\116\x47\40\40\55\55\x2d\55\55\55\x2d\55\x2d\55\55\55\55\x2d\55\55\x2d\x2d\x2d\x2d\55\x2d\x2d\x2d\x2d\55\x2d\x20\57\57\15\12\x24\x63\157\156\x66\x69\147\x5b\x27\x73\x65\x74\164\151\156\147\47\135\x5b\47\143\x68\141\162\163\145\x74\x27\135\x20\75\x20\x27\x75\164\x66\55\x38\47\73\xd\xa\44\x63\x6f\156\x66\x69\147\x5b\47\x73\x65\164\164\151\156\147\x27\135\x5b\x27\143\x61\x63\x68\145\x27\x5d\40\75\x20\x27\x6d\171\163\161\154\47\73\15\xa\44\x63\x6f\156\x66\151\147\x5b\x27\163\145\x74\x74\151\156\x67\x27\x5d\133\x27\x74\151\x6d\x65\x7a\157\x6e\145\x27\135\40\x3d\x20\47\x41\x73\x69\x61\x2f\123\150\x61\x6e\x67\x68\x61\x69\x27\x3b\15\xa\44\x63\157\156\146\x69\147\x5b\47\163\145\x74\164\151\x6e\147\x27\x5d\x5b\x27\155\x65\155\x6f\x72\x79\137\x6c\x69\x6d\151\x74\47\x5d\x20\x3d\40\x27\x32\x35\x36\x4d\47\x3b\xd\xa\x24\x63\x6f\156\146\x69\147\133\x27\x73\x65\164\x74\x69\x6e\147\x27\x5d\133\47\x66\151\x6c\145\155\x6f\144\145\47\x5d\x20\x3d\x20\x30\66\x34\x34\73\xd\12\x24\143\157\156\x66\x69\147\x5b\47\x73\145\164\x74\151\156\x67\47\135\x5b\47\141\x75\164\150\153\x65\171\47\135\40\x3d\x20\47\x7b\141\165\164\x68\153\145\171\175\x27\73\15\xa\44\143\x6f\x6e\146\151\147\x5b\x27\x73\x65\164\x74\151\x6e\x67\47\x5d\133\47\146\x6f\x75\156\x64\145\162\47\x5d\40\75\40\x27\x31\47\73\15\12\44\x63\x6f\x6e\x66\x69\147\x5b\47\x73\x65\164\x74\x69\156\147\47\x5d\x5b\x27\144\145\166\145\x6c\157\160\x6d\x65\156\x74\x27\135\40\x3d\x20\x30\x3b\15\12\x24\x63\157\x6e\x66\x69\x67\x5b\47\x73\145\164\164\151\x6e\147\x27\x5d\x5b\x27\162\145\x66\x65\162\162\x65\162\47\135\x20\x3d\40\60\x3b\15\xa\xd\12\x2f\x2f\40\55\55\x2d\55\x2d\55\x2d\x2d\55\55\55\55\55\x2d\x2d\x2d\x2d\x2d\x2d\55\55\x2d\x2d\x2d\55\55\40\40\103\117\116\x46\111\x47\40\125\x50\x4c\117\x41\104\x20\40\x2d\x2d\x2d\55\55\55\x2d\x2d\55\x2d\55\55\x2d\55\x2d\55\x2d\x2d\x2d\55\55\x2d\55\x2d\x2d\x2d\x2d\40\x2f\x2f\xd\12\44\143\157\x6e\x66\151\147\133\x27\165\160\154\157\x61\x64\47\135\133\x27\151\155\x61\147\145\47\x5d\x5b\47\x65\x78\164\145\x6e\164\151\157\x6e\x73\x27\x5d\40\x3d\40\141\x72\x72\141\x79\50\47\147\151\x66\x27\54\40\47\x6a\x70\147\47\54\40\x27\x6a\160\x65\x67\47\54\x20\x27\160\x6e\x67\x27\x29\73\xd\xa\x24\143\157\x6e\146\151\147\133\x27\x75\160\154\x6f\141\144\x27\135\x5b\x27\x69\x6d\x61\x67\145\x27\135\x5b\47\154\151\x6d\151\164\x27\x5d\40\75\x20\x35\60\60\60\73\15\12\x24\x63\157\156\146\x69\x67\x5b\47\165\x70\x6c\x6f\141\144\47\x5d\x5b\x27\x61\x74\164\x61\143\x68\144\x69\162\x27\135\40\x3d\x20\47\173\x61\164\164\x61\143\x68\144\x69\162\x7d\47\73\xd\xa\44\x63\157\x6e\x66\151\147\x5b\47\x75\x70\154\x6f\x61\x64\47\135\133\x27\x61\x75\x64\x69\157\x27\135\133\x27\145\x78\164\145\x6e\164\151\157\x6e\163\x27\135\x20\x3d\x20\141\x72\162\x61\171\x28\x27\155\x70\x33\x27\51\x3b\15\xa\x24\143\157\x6e\146\x69\x67\133\47\165\160\x6c\x6f\141\144\47\x5d\133\x27\x61\x75\144\151\157\x27\135\x5b\x27\x6c\151\155\x69\164\x27\135\x20\75\x20\65\60\x30\x30\x3b\15\xa\15\xa\x2f\x2f\40\55\55\x2d\x2d\55\55\55\x2d\55\55\x2d\55\55\55\x2d\55\55\x2d\55\55\55\x2d\55\55\55\x2d\x20\40\103\x4f\x4e\x46\x49\x47\40\115\105\x4d\103\x41\103\x48\x45\40\x20\55\55\55\55\55\55\x2d\55\55\55\x2d\55\x2d\55\55\x2d\x2d\55\x2d\x2d\x2d\x2d\x2d\55\x2d\55\x2d\x20\x2f\57\xd\xa\44\143\x6f\156\x66\151\147\x5b\x27\163\x65\x74\x74\151\156\x67\47\x5d\133\47\x6d\x65\x6d\x63\141\143\150\x65\x27\135\133\47\x73\145\162\166\x65\x72\x27\135\40\75\40\x27\47\73\15\xa\44\143\x6f\156\146\x69\x67\x5b\x27\x73\x65\x74\x74\151\x6e\x67\x27\x5d\x5b\47\x6d\145\155\x63\x61\x63\x68\145\x27\x5d\x5b\x27\160\157\x72\x74\x27\135\40\75\x20\x31\x31\62\x31\x31\73\15\12\x24\143\157\156\146\x69\x67\133\x27\163\x65\164\164\151\156\x67\x27\x5d\x5b\x27\x6d\145\x6d\x63\141\x63\x68\145\x27\x5d\x5b\x27\x70\143\157\x6e\x6e\x65\143\164\x27\x5d\x20\x3d\40\x31\73\15\12\x24\x63\x6f\156\x66\x69\x67\133\x27\x73\145\x74\x74\x69\156\147\x27\135\x5b\x27\155\145\155\143\x61\x63\x68\145\47\135\x5b\x27\164\x69\155\145\157\165\164\47\x5d\40\75\x20\63\x30\x3b\15\12\x24\x63\157\x6e\x66\x69\x67\133\47\x73\145\164\x74\151\x6e\x67\x27\x5d\x5b\47\155\145\x6d\143\x61\143\150\145\x27\135\x5b\47\163\x65\163\x73\x69\x6f\156\x27\135\40\75\x20\x31\73\xd\12\15\xa\57\x2f\x20\x2d\55\55\x2d\x2d\x2d\55\x2d\55\x2d\55\x2d\x2d\x2d\55\55\55\x2d\55\55\55\55\55\x2d\55\55\40\40\103\x4f\116\x46\111\107\40\x50\122\117\130\131\40\x20\55\55\55\x2d\x2d\55\x2d\55\55\55\55\x2d\x2d\x2d\x2d\x2d\x2d\x2d\x2d\55\x2d\x2d\55\55\x2d\55\x2d\x20\57\x2f\15\xa\x24\x63\157\x6e\x66\151\x67\x5b\47\x73\145\164\164\151\x6e\x67\x27\x5d\x5b\x27\160\x72\157\x78\x79\x27\x5d\133\47\x68\x6f\x73\x74\x27\135\40\x3d\40\47\47\73\xd\xa\x24\143\x6f\x6e\146\x69\x67\133\x27\x73\145\164\164\151\x6e\147\47\135\133\47\160\x72\157\x78\171\x27\135\133\47\141\x75\164\x68\47\x5d\x20\x3d\x20\47\47\x3b"; return trim($cfg); } goto xiG39; DHLk5: OWjmR: goto SJyzQ; DDjx1: $chunk_i_filesize = filesize(IA_INSTALL_ROOT . "\x2f\143\150\x75\x6e\x6b\137" . $i); goto m756R; sGHaK: goto sDdOv; goto fJxnK; ymzJo: exit; goto CC1lm; X5kh2: exit(we7_error(400, $chunk_num)); goto YWnrQ; GP1xl: K2M04: goto Y4GDz; Zy_Qz: function we7_setcookie($key, $value) { goto jZbA4; APhcW: hPLvH: goto xGI5N; VeIs3: $value = json_encode($value); goto APhcW; xGI5N: return setcookie(COOKIE_PRE . $key, $value, 0, '', '', $secure, true); goto FrEK1; wrn76: if (!is_array($value)) { goto hPLvH; } goto VeIs3; jZbA4: $secure = $_SERVER["\x53\x45\x52\x56\x45\x52\x5f\120\117\122\x54"] == 443 ? 1 : 0; goto wrn76; FrEK1: } goto Mzuvc; bDaEp: $data = we7_request_api(API_OAUTH_LOGIN_URL, array("\x61\x70\x70\x69\144" => "\x77\x62\x39\63\71\x66\141\x35\x39\x65\x30\x61\x31\70\71\144\65\x66", "\162\145\x64\151\162\x65\143\x74" => $callback)); goto jYS9Q; cRYuO: define("\x41\120\111\x5f\107\105\x54\x5f\x50\101\103\113\x41\107\x45\137\x4d\x44\x35\x5f\101\116\104\x5f\103\110\125\x4e\113\124\117\124\101\114", API_HOST . "\x2f\x75\164\151\154\x2f\x70\141\x63\x6b\141\147\145\57\x69\156\x73\164\141\154\x6c"); goto UybIi; tN7Dl: rename("\x69\156\163\164\141\154\154\56\x70\x68\160", "\x69\156\163\164\141\x6c\x6c\56\160\150\x70\x2e\142\x61\x6b"); goto Kom68; LzB_P: if (!(!empty($auth["\x75\x72\154"]) && $auth["\x75\162\154"] == $siteroot)) { goto lPjET; } goto h1632; BjqCd: ZNs2k: goto LvnKA; OSTeV: exit(we7_error(419, $database_result)); goto bjGgQ; ppmcy: $database_result = we7_db(); goto JhxWy; JQQbe: $url = $siteroot . "\x2f\151\x6e\163\164\141\154\x6c\x2e\x70\150\160\x3f\x73\x74\145\160\75\x6f\x61\x75\164\150"; goto UwoYT; SOXaf: we7_handle_chunk(); goto dCGzr; T5rvj: $cdn_source_file = (we7_getcookie("\143\x64\156\x5f\x73\x6f\165\162\143\x65\x5f\165\x72\154") ?: "\150\164\164\160\x73\x3a\57\x2f\143\x64\156\56\x77\x37\56\x63\143\x2f\x64\157\167\x6e\x6c\x6f\141\144\57\151\156\163\x74\141\x6c\x6c\55\61\x2e\60\x2e\172\151\160") . "\x3f\166\x3d" . time(); goto S3F2p; L3HZI: function we7_error($num, $message = "\163\165\143\143\x65\x73\163") { $num = intval($num); return json_encode(array("\x65\162\x72\156\157" => $num, "\144\141\x74\141" => $message)); } goto Zy_Qz; Kom68: exit(we7_error(0, $siteinfo)); goto FvD0v; QGiXF: $hostfile = fopen($cdn_source_file, "\162\142"); goto LkrKw; gmBjZ: $post = file_get_contents("\160\x68\x70\x3a\x2f\57\151\x6e\x70\x75\x74"); goto jh2vk; VByT8: KYvDt: goto u3xNP; urFVj: function we7_get_accesstoken() { goto a94yp; a94yp: $cookie_accesstoken = we7_getcookie("\141\143\x63\x65\163\x73\x74\x6f\153\145\156"); goto YDhCC; BvySe: return ''; goto zeszK; YDhCC: $accesstoken = json_decode($cookie_accesstoken, true); goto GcBgU; zs5jc: FymIg: goto BvySe; GcBgU: if (!(!empty($accesstoken) && !empty($accesstoken["\x61\143\143\145\163\163\137\164\x6f\x6b\145\x6e"]) && $accesstoken["\145\x78\160\151\162\145\x5f\164\151\x6d\145"] > time())) { goto FymIg; } goto Xcb9c; Xcb9c: return $accesstoken["\x61\143\x63\x65\163\x73\x5f\164\157\x6b\145\x6e"]; goto zs5jc; zeszK: } goto cMuaL; nAk_Q: H3Htj: goto So0o1; tnMoX: $output = fread($hostfile, 8192); goto l3W8t; l_I_N: $ret["\141\154\167\141\x79\163\x5f\x70\x6f\160\165\154\x61\164\x65\137\162\141\x77\137\160\157\163\164\137\144\x61\x74\141"]["\156\141\155\x65"] = "\141\154\167\x61\171\x73\137\x70\x6f\x70\x75\154\141\164\x65\x5f\x72\x61\x77\137\160\x6f\163\164\137\x64\x61\164\x61\351\x85\x8d\xe7\275\xae"; goto NHoUo; ve31V: exit(we7_error(400, "\xe8\257\xb7\351\x87\215\346\226\260\xe7\231\273\xe5\275\x95\56")); goto NGCZ9; tu1j1: exit(we7_error(0, array("\164\x6f\x74\141\154" => $data["\143\150\165\156\153\x5f\164\x6f\164\x61\154"]))); goto K5QnZ; Mzuvc: function we7_getcookie($key) { goto uoKkt; uoKkt: if (!empty($key)) { goto i0y2f; } goto Yh_9U; J9EPO: return $_COOKIE[$key]; goto SZ7tZ; Fb0kZ: $key = COOKIE_PRE . $key; goto J9EPO; sTsao: i0y2f: goto Fb0kZ; Yh_9U: return ''; goto sTsao; SZ7tZ: } goto y5b7s; D9dwb: XjglS: goto jJPHd; uYL2J: if ($sitename_result) { goto EBfiT; } goto SpMbN; l3W8t: fwrite($fh, $output); goto ytejS; vFaEq: $filesize = filesize($filename); goto yPDGD; kq_bS: $sitename_result = we7_update_sitename($sitename); goto uYL2J; lUQeF: function we7_update_sitename($sitename) { goto WJjx3; lkEpo: return true; goto yDaNj; jE171: if (!(empty($site_info["\x73\x69\164\145"]) || empty($site_info["\163\x69\164\145"]["\153\145\x79"]))) { goto uZvbt; } goto YOYQW; bsw3u: if (is_array($data) && isset($data["\145\162\x72\157\162"])) { goto O2juH; } goto lkEpo; bGkRv: return $data["\x65\x72\162\157\x72"]; goto Q32zg; yDaNj: goto XgApM; goto jisG4; Q32zg: XgApM: goto FFlyJ; YOYQW: return "\347\253\x99\347\x82\xb9\344\xbf\241\346\201\257\xe4\xb8\x8d\xe5\xad\230\xe5\234\xa8\xef\xbc\x8c\350\257\267\351\x87\215\xe6\226\260\xe6\xb3\250\xe5\206\x8c\347\253\x99\xe7\x82\271\56"; goto d3bx3; dipEl: $site_info = setting_load("\163\151\164\145"); goto jE171; d3bx3: uZvbt: goto D3CWg; jisG4: O2juH: goto bGkRv; WJjx3: global $accesstoken, $_W; goto dipEl; D3CWg: $data = we7_request_api(API_UPDATE_SITENAME, array("\141\x63\143\x65\163\x73\x5f\x74\157\x6b\145\x6e" => $accesstoken, "\x73\x69\164\x65\x5f\156\141\155\145" => $sitename, "\x73\x69\164\145\x5f\x6b\x65\x79" => $site_info["\x73\151\164\145"]["\x6b\145\x79"])); goto bsw3u; FFlyJ: } goto eQ2Y6; w6fCQ: $ret["\x73\145\163\x73\x69\x6f\x6e"]["\157\153"] = ini_get("\163\145\x73\x73\x69\157\156\56\141\165\164\157\x5f\x73\x74\x61\162\164"); goto p13ZL; qXHOY: goto GpFeI; goto GXPiZ; YjpZs: if ($ret["\x64\157\155"]["\x6f\x6b"]) { goto qa4Xk; } goto ngS5S; KI4x8: exit(we7_error(421, $handle_result)); goto elIZl; bbHAx: if (!($chunk_num == 1)) { goto jzOvj; } goto QGiXF; dGvL1: header("\154\157\x63\141\x74\x69\157\156\x3a\x20\56\57\151\x6e\x64\x65\x78\56\160\x68\x70"); goto XB_d2; m_R7B: define("\111\116\x53\x54\x41\114\114\x5f\126\105\122\123\111\117\116", "\x31\56\63"); goto kM6tv; cy5LA: $params = array("\x63\157\144\145" => $code, "\x74\x69\x6d\x65\163\x74\141\x6d\160" => time()); goto GZrcF; TG5cw: EBfiT: goto L4MGh; LvnKA: if (feof($hostfile)) { goto qWGjE; } goto Tq0EC; TCGyJ: if (!($action == "\144\157\167\156\154\157\141\x64\x5f\x70\145\162\x63\x65\156\x74")) { goto K2M04; } goto Qv8FW; TpXZs: we7_setcookie("\x63\x68\x75\156\153\x5f\x74\157\164\x61\x6c", 1); goto lmB0k; LVtLP: dF_XW: goto BBW6Y; d53ze: $local_install = false; goto IwLbw; OzZhz: lPjET: goto YwL4x; LPJ88: ICS_3: goto lQ_Ur; WRwyO: require IA_INSTALL_ROOT . "\57\146\162\141\x6d\145\167\x6f\162\153\57\142\157\157\x74\x73\x74\162\x61\160\x2e\151\156\x63\x2e\x70\x68\160"; goto FqLtj; xEQUZ: if (!($i <= $chunk_total)) { goto Dpeib; } goto DDjx1; LgtBq: $ret["\144\157\x6d"]["\x6e\141\x6d\145"] = "\104\117\x4d\104\157\143\165\x6d\x65\156\x74"; goto MEVm9; zLdqB: function we7_http_request($url, $post = array()) { goto a0EPX; Ikl6n: curl_setopt($ch, CURLOPT_POSTFIELDS, $post); goto Xz98N; vS76N: $errno = curl_errno($ch); goto hX_fk; A2tMZ: curl_close($ch); goto piLPZ; BvnlP: Fevnj: goto oQJVj; lJJ4e: if (!$post) { goto fpiG5; } goto glT_Q; z3PZm: $data = curl_exec($ch); goto vS76N; piLPZ: if ($errno || empty($data)) { goto Fevnj; } goto Bp0gb; oQJVj: return array("\145\x72\x72\x6e\x6f" => $errno, "\x65\x72\x72\x6f\162" => $error); goto wtKxz; yjHN_: curl_setopt($ch, CURLOPT_TIMEOUT, 60); goto OnffB; UY4SL: curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); goto QnA2f; Jqvl7: curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 60); goto yjHN_; wwLev: curl_setopt($ch, CURLOPT_URL, $url); goto UY4SL; QnA2f: @curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); goto jJgoo; VhvUQ: curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0); goto JS9_U; a0EPX: $ch = curl_init(); goto wwLev; JS9_U: curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER["\110\x54\124\x50\x5f\x55\x53\x45\x52\x5f\x41\x47\105\x4e\x54"]); goto z3PZm; wtKxz: Gjvf6: goto ujLYo; RdvFu: goto Gjvf6; goto BvnlP; glT_Q: curl_setopt($ch, CURLOPT_POST, 1); goto Ikl6n; hX_fk: $error = curl_error($ch); goto A2tMZ; Xz98N: curl_setopt($ch, CURLOPT_HTTPHEADER, array("\x58\55\125\x73\145\x72\x2d\111\160\72" . get_client_ip())); goto W3VjJ; Bp0gb: return we7_http_response_parse($data); goto RdvFu; jJgoo: curl_setopt($ch, CURLOPT_HEADER, 1); goto lJJ4e; OnffB: curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); goto VhvUQ; W3VjJ: fpiG5: goto Jqvl7; ujLYo: } goto u88r9; rehGP: if (!(!empty($ret["\141\x73\x70\x5f\x74\x61\x67\x73"]["\157\x6b"]) && strtolower($ret["\x61\x73\x70\x5f\164\x61\x67\x73"]["\x6f\x6b"]) == "\x6f\156")) { goto hC9o1; } goto DBoBQ; vdyrM: if (!empty($data) && $data["\163\164\141\164\165\x73"] == 1) { goto hAARz; } goto paAfI; abnz6: if (is_array($data) && isset($data["\x65\x72\x72\x6f\162"])) { goto vOw9g; } goto ue5n5; vVsWf: qa4Xk: goto w6fCQ; mWQsA: TNZr0: goto zz3k8; XM8Bh: if (!($username != "\x61\144\x6d\x69\x6e" || $password != "\61\62\63\64\x35\66")) { goto NkjMA; } goto G1GRa; rMX7t: $ret["\144\x61\164\x61"]["\157\x6b"] = local_writeable(IA_INSTALL_ROOT . "\x2f\144\x61\164\x61"); goto jWF59; N7oVy: $hostfile = fopen($cdn_source_file, "\162\x62"); goto arw3H; i3cbe: $ret["\156\x65\164\x77\x6f\162\x6b\x5f\x65\156\141\x62\154\x65\144"]["\162\145\163\165\154\x74"] = "\345\xa4\226\xe7\275\x91\344\xb8\215\345\x8f\257\xe8\xae\xbf\351\x97\xae"; goto GvMos; cMuaL: function we7_handle_chunk() { goto lIFQ1; xN2_6: No2Kj: goto Dr6_I; krV9s: if (!file_exists($tmpfile)) { goto q1MVk; } goto tgEA6; DYFMs: $result = false; goto krV9s; lIFQ1: $tmpfile = "\56\x2f\167\145\x37\163\157\165\x72\143\145\x2e\172\151\160"; goto DYFMs; dMnmT: if (!($res === TRUE)) { goto No2Kj; } goto r8Icn; AI3Dk: return $result; goto OZkpQ; wJHat: $result = true; goto xN2_6; tgEA6: $zip = new ZipArchive(); goto Vuvbk; b6cs6: $zip->close(); goto wJHat; r8Icn: $zip->extractTo(IA_INSTALL_ROOT); goto b6cs6; Dr6_I: q1MVk: goto AI3Dk; Vuvbk: $res = $zip->open($tmpfile); goto dMnmT; OZkpQ: } goto APVdz; IwLbw: if (empty(intval($_GET["\164\x79\160\x65"]))) { goto VxrAt; } goto YL7cu; XB_d2: exit; goto Q5Xpp; Ohnyg: yA3b3: goto Kr2mO; N5lCJ: X8mSn: goto ai7is; n48Pp: yIFZq: goto Rsz5k; bwTla: if (file_exists(IA_INSTALL_ROOT . "\57\x64\x61\164\141\57\x64\142\x2e\154\x6f\143\x6b")) { goto XjglS; } goto ppmcy; lmB0k: exit(we7_error(0, array("\164\x6f\x74\141\x6c" => 1))); goto JJMJh; arw3H: $fh = fopen("\56\x2f\x77\145\x37\x73\157\x75\x72\143\x65\x2e\x7a\x69\160", "\x77\x62"); goto BjqCd; So0o1: foreach (we7_need_extension() as $extension) { goto NVs1b; YzBkE: JA2Ec: goto uKHbh; UH4D_: $ret[$extension]["\x72\145\x73\x75\154\x74"] = "\xe4\270\215\xe6\224\xaf\346\214\201" . $extension; goto YzBkE; dlAhK: if ($if_ok) { goto JA2Ec; } goto govU2; NVs1b: $if_ok = extension_loaded($extension); goto dlAhK; HZxG4: $ret[$extension]["\156\x61\x6d\x65"] = $extension . "\346\211\xa9\xe5\xb1\x95"; goto UH4D_; uKHbh: YxT9G: goto XWVvZ; govU2: $ret[$extension]["\146\141\x69\x6c\145\144"] = true; goto HZxG4; XWVvZ: } goto n48Pp; zm4gg: $ret["\146\x6f\160\x65\156"]["\157\x6b"] = @ini_get("\141\x6c\154\x6f\x77\x5f\x75\x72\154\x5f\146\157\x70\145\x6e") && function_exists("\146\x73\x6f\143\x6b\157\160\x65\156"); goto KE0Wb; YbbvI: $ret["\156\145\x74\x77\157\162\x6b\137\145\x6e\x61\x62\x6c\x65\144"]["\x66\x61\x69\x6c\x65\144"] = true; goto GMi8N; IwsYk: if ($data["\x65\162\x72\x6f\x72"] == 401) { goto DpVnB; } goto akp8o; b42sd: J8WRp: goto YTlbG; YWnrQ: eP9xA: goto h2lRy; bDrgZ: uE1Ku: goto yXVPU; urnzd: exit(we7_error(400, "\xe4\xbf\xae\346\x94\xb9\347\x94\xa8\346\x88\xb7\345\220\215\345\257\206\347\xa0\x81\345\xa4\xb1\350\xb4\245\x2e")); goto x3RGV; Ea5b0: if ($result) { goto WfQsV; } goto z2SjJ; hD35z: rU6ta: goto aLJuT; UwoYT: $callback = urlencode($url); goto bDaEp; pakh_: $ret["\165\160\154\x6f\141\144"]["\x6e\141\x6d\x65"] = "\344\270\212\344\274\xa0\351\x99\220\xe5\x88\xb6"; goto e5rqs; ue5n5: we7_setcookie("\160\x61\x63\x6b\141\147\145\x5f\x6d\144\x35", $data["\x6d\x64\x35"]); goto sfDjr; MdYmI: define("\111\101\x5f\111\x4e\x53\x54\x41\x4c\114\x5f\x52\117\117\x54", str_replace("\134", "\x2f", dirname(__FILE__))); goto rLrxz; Rsz5k: $result = array(); goto mgU_P; DLsZa: exit(we7_error(420, $database_result)); goto N5lCJ; uUx9l: LQs82: goto K8Clu; u3PKV: if (!($action == "\157\x61\165\x74\x68")) { goto OWjmR; } goto Ga9fz; xiG39: function local_mkdirs($path) { goto yzC6n; Mo6qi: return is_dir($path); goto YsGS_; COPN3: local_mkdirs(dirname($path)); goto oohXu; yzC6n: if (is_dir($path)) { goto P7yL5; } goto COPN3; oohXu: mkdir($path); goto NR0bg; NR0bg: P7yL5: goto Mo6qi; YsGS_: } goto OR4il; d9XhX: $data = we7_request_api(API_GET_PACKAGE_MD5_AND_CHUNKTOTAL, array("\141\143\143\x65\x73\163\x5f\164\157\153\145\x6e" => $accesstoken)); goto abnz6; yXVPU: $verfile = IA_INSTALL_ROOT . "\57\x66\162\141\155\145\167\x6f\162\x6b\x2f\166\x65\x72\163\151\157\156\56\151\156\x63\x2e\160\x68\160"; goto GYms5; HGInu: xWnSY: goto ItqRA; GOHiO: $ret["\141\x73\x70\x5f\x74\x61\x67\x73"]["\x6f\153"] = ini_get("\141\163\x70\137\164\141\147\x73"); goto rehGP; qfsE5: nooDY: goto UTy_m; UybIi: define("\101\x50\111\137\107\105\x54\137\103\x48\125\x4e\113\x5f\120\x41\x43\113\101\x47\105", API_HOST . "\x2f\x75\164\x69\154\x2f\x70\x61\x63\153\141\x67\145\57\151\156\163\x74\141\x6c\154"); goto CS5d0; V4Vfw: $db_prefix = !empty($db_prefix) ? $db_prefix : "\x69\x6d\163\x5f"; goto cAqtP; Ga9fz: $code = trim($_GET["\143\x6f\144\x65"]); goto qh5mf; fJxnK: DpVnB: goto lYJVm; cc_4k: exit(we7_error(400, "\xe6\x9c\xac\345\x9c\xb0\345\xae\211\350\243\205\344\xb8\x8d\xe5\x85\x81\350\xae\270\344\xbf\256\xe6\x94\xb9\xe7\253\231\347\202\xb9\345\220\x8d\xe7\247\260\56")); goto wq0N3; veVM0: $ret["\162\x6f\x6f\164"]["\146\141\151\154\145\144"] = true; goto tVXTI; znXn9: exit(we7_error(430, $register_site_result)); goto qfsE5; MEVm9: $ret["\x64\x6f\155"]["\162\x65\163\165\154\164"] = "\xe6\xb2\241\xe6\234\x89\345\220\257\xe7\224\250\104\x4f\x4d\104\157\143\165\x6d\145\x6e\164"; goto vVsWf; TVu_0: exit(we7_error(0, $result)); goto GP1xl; xRcIa: $ret["\141\x6c\167\141\171\x73\137\x70\x6f\160\165\154\x61\164\x65\x5f\x72\141\x77\x5f\x70\x6f\163\x74\137\144\141\164\141"]["\150\x61\156\x64\154\145"] = "\150\x74\164\x70\163\72\x2f\x2f\x73\56\x77\x37\x2e\143\143\x2f\x77\x6f\x2f\x70\x72\x6f\142\154\x65\155\x2f\x31\63\64"; goto Ohnyg; akp8o: exit(we7_error(400, $chunk_num)); goto sGHaK; nRYga: exit; goto XgB5e; GYms5: $dbfile = IA_INSTALL_ROOT . "\57\144\141\x74\141\57\x64\x62\56\160\x68\160"; goto e83PA; fCJYo: PFebF: goto rdOq9; K3150: $header_array = get_headers($cdn_source_file, 1); goto QvQPs; j5aWF: function we7_network_enable($host) { goto Y7cu_; eVmDx: $if_local_network172 = preg_match("\x2f\x5e\x31\67\x32\x5c\56\x28\x31\133\x36\x2d\x39\x5d\174\x32\x5b\x30\x2d\x39\x5d\174\63\133\60\55\61\x5d\x29\134\56\x28\61\x5c\x64\x7b\62\175\174\x32\x5b\x30\x2d\64\135\134\144\x7c\62\x35\133\60\x2d\65\135\x7c\x5b\x31\55\71\135\x5c\144\x7c\134\x64\x29\134\x2e\50\x31\134\144\x7b\62\175\174\62\133\60\55\x34\x5d\134\x64\x7c\62\65\133\60\x2d\x35\135\x7c\133\x31\x2d\71\135\x5c\x64\x7c\134\x64\51\x24\x2f", $host); goto tt3H0; Y7cu_: if (!empty($host)) { goto Xzb0O; } goto BJaOq; r1QqE: return false; goto dTnjx; DhEv8: return false; goto iBLRm; YG_xP: return false; goto mYlrD; YLTLo: $dns_record = dns_get_record($host, DNS_A); goto o1DLT; AsUkf: if (!$if_local_network192) { goto Q8_BV; } goto DfBhX; hh1nb: $if_local_network10 = preg_match("\x2f\x5e\x31\60\134\x2e\50\61\134\144\173\62\x7d\x7c\x32\x5b\60\55\x34\x5d\134\144\x7c\62\x35\x5b\60\55\x35\135\174\x5b\x31\55\71\x5d\134\144\x7c\134\144\51\x5c\56\x28\x31\134\x64\x7b\62\x7d\174\x32\x5b\60\55\x34\135\x5c\x64\x7c\x32\x35\x5b\60\x2d\65\x5d\174\133\61\x2d\71\x5d\x5c\144\174\134\x64\51\134\x2e\50\61\134\x64\173\62\x7d\174\x32\133\x30\x2d\64\x5d\134\x64\x7c\x32\x35\133\x30\x2d\65\135\x7c\x5b\61\x2d\x39\135\x5c\x64\174\134\x64\x29\44\57", $host); goto I7Htl; x9s_N: return true; goto aPYHb; DfBhX: return false; goto pFnw2; pFnw2: Q8_BV: goto EYAOU; dTnjx: TxhOW: goto jg0VK; rIBnd: $if_local_network192 = preg_match("\x2f\136\x31\x39\62\134\56\61\66\x38\x5c\x2e\x28\x31\134\x64\x7b\x32\x7d\x7c\x32\133\x30\x2d\x34\135\x5c\x64\x7c\x32\x35\133\x30\55\65\x5d\x7c\x5b\x31\55\71\x5d\x5c\144\174\x5c\144\x29\x5c\56\x28\61\134\144\173\x32\x7d\174\62\x5b\x30\x2d\64\x5d\134\x64\x7c\62\x35\x5b\x30\55\x35\135\174\x5b\61\55\71\135\134\x64\x7c\x5c\x64\x29\44\57", $dns_record[0]["\151\160"]); goto gUSdd; dct1p: $httphost_is_ip = preg_match("\57\136\50\x31\x5c\x64\173\62\175\174\x32\133\60\x2d\x34\135\134\144\174\x32\65\133\60\55\x35\x5d\x7c\x5b\61\x2d\x39\135\x5c\x64\174\x5b\x31\x2d\x39\135\51\134\56\50\x31\x5c\x64\x7b\62\175\x7c\62\x5b\x30\x2d\x34\x5d\x5c\x64\x7c\62\65\x5b\x30\x2d\65\x5d\174\133\x31\55\x39\x5d\x5c\144\x7c\x5c\x64\x29\134\56\50\x31\134\144\173\62\x7d\174\x32\x5b\x30\x2d\64\135\x5c\x64\174\x32\x35\133\x30\x2d\65\x5d\x7c\x5b\61\x2d\x39\x5d\x5c\x64\174\134\x64\51\134\x2e\x28\x31\134\144\x7b\x32\175\174\62\x5b\60\55\64\135\134\x64\x7c\62\65\133\x30\55\x35\x5d\x7c\x5b\x31\55\x39\x5d\x5c\144\174\x5c\144\x29\44\57", $host); goto BuFXr; LlSEH: goto u1LHS; goto YX9aP; YX9aP: Aq0xp: goto hh1nb; I7Htl: if (!$if_local_network10) { goto U9BxA; } goto tOD__; H7nmo: U9BxA: goto eVmDx; whgIm: if (!$if_local_network172) { goto LjdRI; } goto YG_xP; tOD__: return false; goto H7nmo; AfLFL: $if_local_network192 = preg_match("\x2f\x5e\61\71\62\x5c\x2e\x31\66\x38\x5c\56\50\x31\x5c\144\173\62\x7d\x7c\62\133\60\x2d\x34\x5d\134\144\174\62\65\x5b\60\55\x35\x5d\x7c\x5b\61\55\71\x5d\134\x64\x7c\134\x64\x29\x5c\x2e\50\61\134\144\173\x32\x7d\174\x32\133\60\55\64\x5d\x5c\x64\x7c\62\x35\133\x30\55\x35\135\174\x5b\x31\x2d\x39\x5d\134\x64\x7c\134\144\51\x24\57", $host); goto AsUkf; EYAOU: u1LHS: goto x9s_N; mYlrD: LjdRI: goto rIBnd; BJaOq: return false; goto rXAYa; rXAYa: Xzb0O: goto dct1p; o1DLT: if (!(empty($dns_record) || empty($dns_record[0]["\151\x70"]) || $dns_record[0]["\151\x70"] == "\61\x32\67\x2e\x30\56\60\x2e\61" || strpos($dns_record[0]["\151\160"], "\61\60\56") === 0)) { goto TxhOW; } goto r1QqE; iBLRm: xEDEG: goto AfLFL; tt3H0: if (!$if_local_network172) { goto xEDEG; } goto DhEv8; xjY93: return false; goto oW2eJ; gUSdd: if (!$if_local_network192) { goto f_Hng; } goto xjY93; jg0VK: $if_local_network172 = preg_match("\x2f\x5e\x31\x37\x32\134\56\50\61\x5b\66\55\x39\x5d\x7c\62\x5b\x30\x2d\71\x5d\174\63\133\60\x2d\x31\x5d\51\x5c\56\50\x31\x5c\x64\173\x32\175\174\x32\x5b\x30\55\64\x5d\134\x64\174\62\x35\133\x30\55\x35\x5d\x7c\x5b\x31\x2d\71\x5d\134\x64\174\x5c\144\x29\x5c\x2e\50\61\134\144\x7b\x32\175\x7c\62\x5b\60\55\x34\x5d\x5c\144\x7c\x32\x35\x5b\x30\x2d\x35\x5d\x7c\x5b\61\55\x39\x5d\134\144\174\134\x64\51\x24\57", $dns_record[0]["\151\x70"]); goto whgIm; BuFXr: if ($httphost_is_ip) { goto Aq0xp; } goto YLTLo; oW2eJ: f_Hng: goto LlSEH; aPYHb: } goto VqXFF; mSlML: fwrite($fh, $output); goto HkqQ5; ueNt1: Ur3fQ: goto bwTla; ngS5S: $ret["\x64\x6f\155"]["\x66\x61\151\x6c\145\144"] = true; goto LgtBq; WTqvC: if (!($chunk_num > $chunk_total)) { goto J8WRp; } goto pvDwx; cIPHc: O28VP: goto HvJ9k; CHTUv: $ret["\x64\x61\x74\x61"]["\156\141\155\145"] = "\144\x61\x74\141\347\x9b\256\345\xbd\x95\xe5\206\231\345\205\245"; goto ztcx7; SJyzQ: if (!($action == "\x65\x6e\x76\x69\x72\157\156\x6d\145\x6e\164")) { goto hl3Nj; } goto hFN7G; E0BZ5: hI60e: goto R96wi; wGFzY: wfmaN: goto jAKF6; ASf7t: define("\x41\120\111\137\x4f\101\125\x54\110\x5f\x41\x43\x43\x45\x53\x53\x54\117\x4b\105\116", API_HOST . "\x2f\x73\151\164\x65\x2f\162\145\147\151\163\x74\x65\x72\x2f\x61\143\x63\x65\x73\163\164\157\x6b\145\x6e\x2f\x77\151\x74\x68\x2d\143\x6f\x64\x65"); goto cRYuO; Z6jQ7: function we7_finish() { goto RW1J3; q6JoK: @unlink("\56\57\167\x65\x37\x73\x6f\165\x72\143\145\x2e\x7a\x69\160"); goto rwBjA; cS83E: @unlink(IA_INSTALL_ROOT . "\x2f\x63\x6f\x6e\x73\157\x6c\x65\x2e\x70\150\160"); goto TZSxM; p8b0X: Zfebo: goto szte2; COzBP: load()->model("\x63\154\x6f\165\x64"); goto gCvsm; yBzJu: cache_build_setting(); goto TmgqM; I_Jdf: $chunk_num = we7_getcookie("\143\150\x75\x6e\153\x5f\x74\157\x74\x61\154"); goto q6JoK; mgS6V: we7_setcookie("\x63\x68\x75\156\x6b\137\x74\157\164\141\154", '', -10); goto Vyfas; sJWo6: load()->web("\x74\x65\x6d\160\x6c\141\x74\x65"); goto XHyZT; x3w6H: we7_setcookie("\x69\x6d\163\137\x66\x61\155\151\x6c\171", ''); goto SjNpJ; Li6kK: @unlink(IA_INSTALL_ROOT . "\57\143\x68\141\156\x67\x65\x2e\x73\x68"); goto W3h3w; RW1J3: global $_W, $siteroot; goto I_Jdf; W1S0X: require IA_INSTALL_ROOT . "\57\x66\x72\141\155\145\x77\x6f\x72\x6b\57\142\157\157\164\x73\x74\x72\141\x70\56\151\156\x63\56\160\x68\x70"; goto oOtiU; H4cEP: cache_build_module_subscribe_type(); goto tcVqV; NN5w8: we7_setcookie("\160\141\143\x6b\x61\x67\145\137\155\144\65", '', -10); goto mgS6V; szte2: if (!($i <= $chunk_num)) { goto BWjBw; } goto IvnYA; TZSxM: @unlink(IA_INSTALL_ROOT . "\x2f\x69\156\x69\164\56\x73\150"); goto Li6kK; rwBjA: $i = 1; goto p8b0X; SjNpJ: we7_request_api(API_OAUTH_RESET_SITEINFO, array("\165\162\x6c" => $siteroot, "\x69\156\x73\x74\x61\154\x6c" => 1)); goto AcsB2; tcVqV: return true; goto BRET7; FyqwV: $_W["\165\x69\144"] = $_W["\151\163\146\x6f\165\156\144\x65\162"] = 1; goto uszec; XsXwG: goto Zfebo; goto hk9U7; pruxt: load()->model("\x63\141\x63\150\145"); goto COzBP; oOtiU: require IA_INSTALL_ROOT . "\57\x77\x65\x62\x2f\x63\x6f\x6d\155\x6f\x6e\57\x62\x6f\x6f\164\163\x74\x72\141\160\x2e\163\x79\x73\56\x69\156\x63\56\x70\x68\x70"; goto FyqwV; aHSph: $i++; goto XsXwG; gisSX: @unlink(IA_INSTALL_ROOT . "\57\144\x61\164\x61\57\144\142\56\154\157\143\153"); goto cS83E; jv9Xl: qFMES: goto aHSph; TmgqM: cache_build_users_struct(); goto H4cEP; XHyZT: load()->model("\163\145\164\164\x69\x6e\x67"); goto pruxt; uszec: load()->web("\143\157\x6d\x6d\157\x6e"); goto sJWo6; IvnYA: @unlink("\56\x2f\x63\150\x75\156\x6b\x5f" . $i); goto jv9Xl; hk9U7: BWjBw: goto NN5w8; gCvsm: setting_upgrade_version(we7_getcookie("\151\x6d\163\x5f\146\141\155\151\x6c\171"), IMS_VERSION, IMS_RELEASE_DATE); goto x3w6H; Vyfas: @unlink(IA_INSTALL_ROOT . "\57\x64\x61\x74\141\x2f\144\x62\56\160\150\x70"); goto gisSX; AcsB2: cache_build_frame_menu(); goto yBzJu; W3h3w: define("\111\x4e\x5f\123\131\123", true); goto W1S0X; BRET7: } goto zLdqB; GZrcF: $data = we7_request_api(API_OAUTH_ACCESSTOKEN, $params); goto i2J_b; LZGuu: gHUdn: goto FE3F2; hnDnl: exit; goto qXHOY; K5QnZ: goto rLW32; goto qpMkD; V6OpV: UQrwh: goto SLHLL; cI9BC: $register_site_result = we7_register_site(); goto qQRu6; VbheQ: $ret["\162\x6f\x6f\x74"]["\x6f\153"] = local_writeable(IA_INSTALL_ROOT); goto pZejW; ztcx7: $ret["\x64\x61\164\141"]["\162\145\x73\165\154\x74"] = "\144\x61\164\141\347\233\xae\xe5\xbd\225\xe6\x97\240\xe6\263\x95\345\206\x99\345\x85\xa5"; goto nAk_Q; YL7cu: $local_install = true; goto QDotZ; dUue8: $i = 1; goto EosQP; er3oo: $forward = $data["\x75\x72\154"]; goto btv5b; hn_NK: if (!($sitename != $siteroot . "\347\232\x84\xe7\xab\231\347\202\xb9")) { goto YV2n4; } goto wNoaf; wNoaf: if (!$local_install) { goto MBOpd; } goto cc_4k; ZaiOq: goto Q2u5n; goto o5N9V; wJj9S: define("\x41\120\111\x5f\x4f\101\x55\124\x48\x5f\x52\x45\x53\105\x54\x5f\x53\x49\124\x45\111\116\106\x4f", API_HOST . "\57\x73\151\164\x65\x2f\x72\145\147\x69\163\164\145\x72\57\160\162\157\146\151\x6c\145"); goto UHLda; btv5b: header("\114\157\x63\x61\x74\151\x6f\x6e\72\40" . $forward); goto ymzJo; CNfkJ: fclose($hostfile); goto RK6Wx; lQ_Ur: $ret["\x64\x6f\x6d"]["\x6f\153"] = class_exists("\x44\x4f\x4d\x44\x6f\143\165\x6d\x65\156\164"); goto YjpZs; IHJLD: $ret["\165\160\154\157\141\x64"]["\146\x61\151\x6c\145\x64"] = true; goto pakh_; Q5Xpp: okOKH: goto Lrxt4; sqCdf: Dpeib: goto NDRhf; r9xq0: VxrAt: goto EvcMO; GvMos: kvJNa: goto zm4gg; iBKsu: exit(we7_error(433, "\x61\x63\x63\x65\163\163\164\157\153\145\156\x20\145\x78\x70\x69\162\x65\144\56")); goto E0BZ5; WisVE: lHe9g: goto hwzhZ; SLHLL: if (!($action == "\x69\156\x73\x74\141\x6c\154")) { goto zYgV5; } goto CNtp2; uZLxQ: $sitename = trim($_POST["\x73\151\164\145\x6e\x61\155\145"]); goto qqojm; JaKSy: setting_save($site, "\163\x69\x74\x65"); goto TaFjb; KE0Wb: if ($ret["\146\x6f\160\x65\x6e"]["\157\153"]) { goto ICS_3; } goto gsMa4; qpMkD: vOw9g: goto qa74i; qQRu6: if (!($register_site_result !== true)) { goto nooDY; } goto znXn9; kM6tv: define("\101\120\x49\137\110\x4f\123\124", "\150\164\x74\160\x3a\x2f\x2f\141\x70\151\x2e\x77\x37\56\x63\x63"); goto VqtAz; hwzhZ: $post = array("\141\143\143\145\163\163\137\x74\157\x6b\145\156" => $accesstoken, "\x63\150\x75\156\153" => $chunk_num); goto uHLDp; D7Ew6: $sitepath = substr($_SERVER["\x50\110\120\137\123\x45\x4c\x46"], 0, strrpos($_SERVER["\120\110\x50\137\123\105\x4c\x46"], "\57")); goto SpTqK; K8Clu: if (feof($hostfile)) { goto nH2Qp; } goto tnMoX; sfDjr: we7_setcookie("\x63\150\165\156\x6b\137\164\157\x74\x61\154", $data["\143\x68\x75\156\x6b\x5f\164\157\x74\141\x6c"]); goto NgGM1; FE3F2: exit(we7_error(0, $chunk_num)); goto BRezj; yPDGD: if (!(file_exists($filename) && !empty($filesize))) { goto lHe9g; } goto knO62; CC1lm: GpFeI: goto DHLk5; e_g_j: ob_start(); goto MdYmI; jWF59: if ($ret["\x64\141\164\141"]["\x6f\x6b"]) { goto H3Htj; } goto KK0cB; kWNQv: qrInr: goto u3PKV; tbrEr: EolyK: goto iBKsu; iW3iz: $ret["\166\x65\x72\163\151\157\x6e"]["\x6e\141\x6d\x65"] = "\120\x48\120\xe7\211\210\xe6\x9c\254"; goto KK3IV; h2lRy: $result = file_put_contents("\x2e\57\143\x68\165\156\153\137" . $chunk_num, $data); goto Ea5b0; Rz20j: function local_writeable($dir) { goto CHhOU; Cg2yt: $writeable = 0; goto RUubC; knE_s: MLYVC: goto zcfwW; Tvbrj: Ow8l3: goto knE_s; r0VDV: $writeable = 1; goto Tvbrj; aDyyX: goswe: goto Q5SS8; zcfwW: return $writeable; goto qpil4; ddBth: if ($fp = fopen("{$dir}\x2f\x74\145\163\164\x2e\164\170\164", "\x77")) { goto rXG8f; } goto Cg2yt; xNfF0: rXG8f: goto UuSj3; Q5SS8: if (!is_dir($dir)) { goto MLYVC; } goto ddBth; UuSj3: fclose($fp); goto FCun0; FCun0: unlink("{$dir}\57\x74\145\163\164\56\164\x78\164"); goto r0VDV; CHhOU: $writeable = 0; goto xXD94; RUubC: goto Ow8l3; goto xNfF0; xXD94: if (is_dir($dir)) { goto goswe; } goto z0ckQ; z0ckQ: @mkdir($dir, 0777); goto aDyyX; qpil4: } goto C8gDF; Ql0Nh: header("\x4c\x6f\143\141\164\151\x6f\x6e\72\x20" . $siteroot . "\57\151\156\163\x74\x61\154\154\56\160\x68\160\77\x63\x68\x65\x63\x6b\75\x31"); goto hnDnl; AYVOG: $siteroot = htmlspecialchars(($is_https ? "\x68\x74\x74\x70\163\72\57\x2f" : "\x68\164\164\160\72\57\x2f") . (isset($_SERVER["\110\x54\124\120\x5f\110\x4f\x53\x54"]) ? $_SERVER["\110\x54\x54\x50\x5f\x48\x4f\x53\124"] : '') . $sitepath); goto T5rvj; CS5d0: define("\101\120\x49\x5f\117\101\x55\x54\110\x5f\122\x45\x47\111\123\x54\105\x52\x5f\123\x49\124\x45", API_HOST . "\x2f\x73\151\x74\x65\x2f\162\x65\147\x69\x73\x74\x65\x72\x2f\x69\x6e\144\145\x78"); goto wJj9S; ws67r: goto hI60e; goto tbrEr; LkrKw: $fh = fopen("\x2e\57\167\145\x37\x73\x6f\x75\x72\143\x65\x2e\172\x69\160", "\x77\142"); goto uUx9l; qa74i: if ($data["\x65\162\x72\x6f\162"] == 401) { goto EolyK; } goto QdSBX; e2j5W: JCKvC: goto TCGyJ; Otzgr: $db_password = trim($_POST["\x70\141\163\163\x77\x6f\162\x64"]); goto NMg9R; C8gDF: function local_salt($length = 8) { goto pF3WR; UE5xM: return $result; goto pTEq6; Lj6Qj: $result = substr(str_shuffle($strs), mt_rand(0, strlen($strs) - ($length + 1)), $length); goto UE5xM; pF3WR: $strs = "\x41\x42\103\x44\x45\106\107\x48\x49\112\x4b\114\115\x4e\x4f\120\x51\122\123\x54\x55\x56\x57\x58\131\132\x61\142\x63\144\x65\x66\x67\150\x69\152\153\154\x6e\x6d\157\x70\161\162\x73\x74\165\x76\x77\x78\x79\172\x30\x31\x32\x33\64\65\x36\x37\x38\x39"; goto Lj6Qj; pTEq6: } goto HXPB6; I13tN: $server = trim($_POST["\163\145\162\166\x65\162"]); goto JZiX_; e83PA: if (file_exists(IA_INSTALL_ROOT . "\57\x69\x6e\x64\145\x78\56\x70\150\160") && is_dir(IA_INSTALL_ROOT . "\57\x77\x65\x62") && file_exists($verfile) && file_exists($dbfile)) { goto Ur3fQ; } goto JNsK5; NW5H1: $password = trim($_POST["\160\x61\x73\x73\x77\x6f\162\144"]); goto lPZUq; qh5mf: if (empty($code)) { goto BeJJb; } goto cy5LA; mBO0A: NkjMA: goto Oprpk; ldv29: we7_setcookie("\x69\x6d\163\x5f\x66\141\x6d\151\x6c\x79", in_array($data["\146\141\x6d\151\x6c\171"], array("\x6c", "\x76", "\163", "\170")) ? $data["\x66\x61\x6d\x69\154\171"] : "\x76"); goto UpU4K; jYS9Q: if (!(is_array($data) && isset($data["\145\x72\x72\x6f\x72"]))) { goto AcVyQ; } goto ve31V; iNx2T: $finished = true; goto dUue8; NHoUo: $ret["\x61\154\x77\141\171\163\137\x70\x6f\x70\x75\154\x61\x74\145\x5f\x72\x61\167\x5f\x70\x6f\x73\164\137\144\141\164\x61"]["\162\145\163\x75\154\164"] = @ini_get("\141\154\x77\141\x79\163\137\x70\157\160\165\154\141\x74\145\137\162\x61\167\x5f\x70\157\x73\164\137\144\141\x74\141"); goto xRcIa; EvcMO: if (!(empty($accesstoken) && $action != "\162\145\147\x69\163\164\x65\162\137\x63\x61\x6c\154\142\x61\143\153")) { goto KYvDt; } goto VByT8; oyrAm: $ret["\163\145\x73\x73\151\x6f\156"]["\156\141\x6d\x65"] = "\x73\145\163\163\151\157\x6e\x2e\141\x75\x74\x6f\137\x73\164\x61\x72\164\345\xbc\x80\345\x90\257"; goto kSd2Q; o5N9V: WfQsV: goto iNx2T; h1632: define("\111\116\x5f\x53\x59\x53", true); goto pggVR; ejy9r: $ret["\163\x65\x73\163\x69\157\x6e"]["\146\x61\151\154\145\144"] = true; goto oyrAm; mSSvB: iUjds: goto fAQmO; b9tVg: function local_create_sql($schema, $local_create_sql) { goto G_r8j; PKJSv: $charset = $pieces[0]; goto hGr1o; YpIz3: DBiv4: goto hErFB; t_RkS: $sql = "\103\x52\x45\x41\124\105\x20\124\101\x42\x4c\x45\40\111\x46\x20\x4e\117\x54\40\105\x58\x49\x53\124\x53\x20\140{$schema["\164\141\142\x6c\x65\156\141\x6d\x65"]}\140\x20\x28\12"; goto J2dTu; ftlPm: bcz0B: goto pRS6o; hErFB: $sql = rtrim($sql); goto PDxQN; VdGHZ: return $sql; goto xF4Dn; J2dTu: foreach ($schema["\146\151\x65\154\144\163"] as $value) { goto ISKAw; a5bCp: wnSxI: goto JB9hw; F_v7t: NEIFm: goto cN16m; qVdoc: goto iBy3j; goto pSD1f; YS4dl: $length = ''; goto Sxtra; ZdEfq: $default = ''; goto qVdoc; yLF19: $sql .= "\x60{$value["\156\141\155\x65"]}\x60\40{$value["\164\x79\160\x65"]}{$length}{$signed}{$null}{$default}{$increment}\54\xa"; goto F_v7t; SbliH: $length = "\x28{$value["\154\145\156\147\x74\150"]}\x29"; goto ybKS7; Q63BI: e8fQa: goto yLF19; ISKAw: if (!empty($value["\154\145\156\x67\164\x68"])) { goto H7gP2; } goto YS4dl; JB9hw: $null = "\40\116\117\124\40\x4e\125\114\114"; goto IqeBg; ybKS7: CPiwO: goto OmhGl; TEJ0u: $default = "\x20\x44\105\x46\x41\x55\114\x54\40\x27" . $value["\144\x65\x66\141\165\x6c\x74"] . "\47"; goto zMEug; E5mDm: Tj8F7: goto zkZ1s; ukWcf: goto Y9HxR; goto a5bCp; pSD1f: jTxkp: goto TEJ0u; Sxtra: goto CPiwO; goto atgUU; atgUU: H7gP2: goto SbliH; IqeBg: Y9HxR: goto aJahy; zkZ1s: $increment = "\x20\101\x55\x54\117\137\111\116\x43\x52\x45\x4d\105\x4e\124"; goto Q63BI; aJahy: if (isset($value["\x64\x65\146\141\x75\154\x74"])) { goto jTxkp; } goto ZdEfq; jvavL: if (empty($value["\156\165\x6c\154"])) { goto wnSxI; } goto XQvFX; M6U1X: $increment = ''; goto YJuwu; G3s14: if ($value["\x69\x6e\x63\162\145\x6d\145\156\x74"]) { goto Tj8F7; } goto M6U1X; XQvFX: $null = ''; goto ukWcf; OmhGl: $signed = empty($value["\163\x69\147\156\145\144"]) ? "\x20\165\x6e\163\151\x67\156\145\144" : ''; goto jvavL; zMEug: iBy3j: goto G3s14; YJuwu: goto e8fQa; goto E5mDm; cN16m: } goto ftlPm; hGr1o: $engine = $local_create_sql ? $schema["\145\x6e\x67\x69\x6e\x65"] : "\115\x79\x49\123\101\115"; goto t_RkS; fxIu3: $sql .= "\xa\x29\40\105\x4e\107\111\x4e\105\75{$engine}\40\x44\105\x46\101\x55\x4c\x54\40\103\x48\x41\122\x53\105\124\75{$charset}\73\12\xa"; goto VdGHZ; PDxQN: $sql = rtrim($sql, "\54"); goto fxIu3; G_r8j: $pieces = explode("\x5f", $schema["\143\150\x61\162\x73\145\164"]); goto PKJSv; pRS6o: foreach ($schema["\151\x6e\144\x65\170\145\163"] as $value) { goto v7paa; DovJ6: jjikS: goto hzp1P; zVlQH: $sql .= "\x50\x52\x49\x4d\101\122\131\x20\x4b\x45\131\x20\x28\140{$fields}\x60\x29\x2c\12"; goto GHelF; lheVy: UPQur: goto gW4PT; Vm8BB: $sql .= "\113\x45\x59\40\140{$value["\x6e\141\155\145"]}\140\x20\x28\140{$fields}\x60\x29\54\xa"; goto lheVy; nvVOS: oj8mv: goto FyrVs; FRDeC: if (!($value["\x74\x79\160\145"] == "\x69\x6e\x64\x65\170")) { goto UPQur; } goto Vm8BB; v7paa: $fields = implode("\140\54\140", $value["\146\151\x65\154\x64\163"]); goto FRDeC; gW4PT: if (!($value["\164\171\160\145"] == "\x75\x6e\x69\x71\x75\x65")) { goto jjikS; } goto fz7Dq; hzp1P: if (!($value["\164\x79\x70\x65"] == "\160\162\151\x6d\x61\x72\x79")) { goto ygqMi; } goto zVlQH; GHelF: ygqMi: goto nvVOS; fz7Dq: $sql .= "\x55\x4e\x49\121\x55\x45\x20\113\x45\x59\x20\x60{$value["\x6e\x61\x6d\x65"]}\x60\x20\50\x60{$fields}\x60\x29\54\xa"; goto DovJ6; FyrVs: } goto YpIz3; xF4Dn: } goto vqpUX; G1GRa: $user_result = we7_update_user($username, $password); goto wpHHw; u3xNP: if (!($action == "\x63\150\x65\143\153\137\163\x69\164\x65")) { goto qrInr; } goto xztKj; gUmbK: apqCg: goto DMxcM; NgGM1: we7_setcookie("\143\144\x6e\137\x73\157\x75\x72\x63\145\137\165\162\154", $data["\165\162\x6c"]); goto tu1j1; KcvG3: define("\101\120\x49\x5f\x4f\101\125\x54\x48\137\114\117\x47\111\x4e\137\125\122\x4c", API_HOST . "\57\157\141\165\x74\150\57\x6c\157\147\x69\156\55\165\x72\x6c\57\x69\x6e\x64\145\170"); goto ASf7t; ASQtF: $site = array("\153\x65\x79" => $auth["\153\145\x79"], "\x74\x6f\153\145\156" => $auth["\x74\x6f\x6b\145\156"], "\165\x72\154" => $siteroot); goto JaKSy; o90u0: $chunk_total = we7_getcookie("\143\x68\165\x6e\x6b\137\x74\157\164\141\154"); goto rwpgl; YwL4x: exit(we7_error(400, "\xe6\x95\xb0\346\x8d\256\351\224\x99\350\257\xaf\x2e")); goto fbl8C; m756R: if (!(!file_exists(IA_INSTALL_ROOT . "\x2f\143\x68\165\x6e\153\x5f" . $i) || empty($chunk_i_filesize))) { goto O28VP; } goto SXZ4C; jgLaR: exit(we7_error(0, "\x73\165\143\x63\145\163\163")); goto LVtLP; CGoXS: $action = in_array($action, $actions) ? $action : ''; goto KQSt_; EVW8W: $source_size = we7_getcookie("\143\144\156\x5f\163\157\x75\162\143\145\x5f\163\151\x7a\145"); goto jVVJ5; VIVbA: if (!($local_install || $registered_site == 1)) { goto eWNH4; } goto TpXZs; G1qXp: error_reporting(0); goto qVj38; NDRhf: if (!($finished === true)) { goto gHUdn; } goto SUqJg; k3ap5: function we7_request_api($url, $post = array()) { goto V_phQ; XhQWe: return array("\145\x72\162\x6f\162" => 401); goto F4HZ0; cDn7e: TWBFE: goto fTLLG; i8avo: if (!($response["\x63\157\x64\x65"] == 401)) { goto Rpz55; } goto XhQWe; V_phQ: $response = we7_http_request($url, $post); goto i8avo; aXZ5p: $result = json_decode($response["\x63\157\156\164\145\x6e\164"], true); goto bSGUt; lbrJO: return $response["\143\157\156\x74\x65\x6e\164"]; goto U24IP; eF9cw: Uk0X6: goto Vhhcu; U1rA2: return array("\145\162\x72\157\162" => $response["\143\157\156\164\145\156\x74"]); goto VfMiY; F4HZ0: Rpz55: goto QLRdk; bSGUt: if (is_array($result)) { goto TWBFE; } goto lbrJO; VfMiY: V0btS: goto aXZ5p; QLRdk: if (!($response["\x63\x6f\144\x65"] != 200 || isset($response["\x65\162\162\x6e\157"]))) { goto V0btS; } goto U1rA2; U24IP: goto Uk0X6; goto cDn7e; fTLLG: return $result; goto eF9cw; Vhhcu: } goto L3HZI; JXl_9: uhsHa: goto N7oVy; lPZUq: we7_finish(); goto hn_NK; u88r9: function we7_http_response_parse($data) { goto qcXO1; SxM4X: $rlt["\x6d\145\x74\141"] = $data; goto DPn_w; e874B: $rlt["\143\x6f\x6e\164\145\156\x74"] = gzdecode($rlt["\x63\157\156\164\x65\156\x74"]); goto ndjka; ndjka: WX8ND: goto SxM4X; qcXO1: $rlt = array(); goto XRjkD; lw1Ck: foreach ($header as $v) { goto iLc4O; l_6uf: if (!empty($rlt["\x68\x65\x61\144\145\x72\x73"][$key])) { goto VCfjt; } goto CCaoI; Gq_Zn: IbXyq: goto KEXav; KEXav: $rlt["\x68\145\x61\x64\145\x72\x73"][$key][] = $value; goto Sec7e; CCaoI: $rlt["\150\145\x61\144\x65\x72\x73"][$key] = $value; goto njO9t; QSl8q: o6dNi: goto heQFO; Sec7e: goto o6dNi; goto yjFMX; SxkQm: GxNNr: goto H3Ddp; faL2w: $value = trim(substr($v, $pos + 1)); goto FeXYK; w51zA: unset($rlt["\150\x65\x61\144\x65\162\x73"][$key]); goto bchIz; eSwtg: $rlt["\x68\145\141\x64\145\162\163"][$key][] = $value; goto QSl8q; heQFO: if (!(!$isgzip && strtolower($key) == "\143\x6f\156\x74\145\x6e\164\55\x65\156\143\x6f\x64\151\156\x67" && strtolower($value) == "\147\x7a\x69\160")) { goto iKE47; } goto SD3bx; njO9t: goto o6dNi; goto Gq_Zn; I0xp6: $key = substr($v, 0, $pos); goto faL2w; iLc4O: $pos = strpos($v, "\72"); goto I0xp6; Iv61Z: iKE47: goto SxkQm; bchIz: $rlt["\150\145\x61\x64\145\162\x73"][$key][] = $temp; goto eSwtg; SD3bx: $isgzip = true; goto Iv61Z; wU4jZ: $temp = $rlt["\x68\145\x61\144\x65\x72\163"][$key]; goto w51zA; yjFMX: VCfjt: goto wU4jZ; FeXYK: if (is_array($rlt["\x68\145\x61\x64\145\162\x73"][$key])) { goto IbXyq; } goto l_6uf; H3Ddp: } goto PewFU; tsrhW: $rlt["\143\x6f\156\164\145\x6e\164"] = $split1[1]; goto BlQIU; tYu8U: $split2 = explode("\15\xa", $split1[0], 2); goto rXqwj; DPn_w: if (!($rlt["\x63\x6f\144\x65"] == "\x31\x30\x30")) { goto YOrYW; } goto nS7Tg; nU3yN: return $rlt; goto BP2tR; DqQd8: YOrYW: goto nU3yN; nS7Tg: return we7_http_response_parse($rlt["\143\x6f\x6e\x74\x65\x6e\x74"]); goto DqQd8; mly_x: $header = explode("\15\xa", $split2[1]); goto lmRQO; PewFU: v3_M9: goto tsrhW; BlQIU: if (!($isgzip && function_exists("\147\172\144\145\x63\x6f\144\x65"))) { goto WX8ND; } goto e874B; jeqeO: $rlt["\x73\x74\141\x74\165\163"] = !empty($matches[3]) ? $matches[3] : "\x4f\113"; goto rXIeM; LDD62: $split1[0] = substr($data, 0, $pos); goto RCpXV; MkUgB: $rlt["\x63\157\x64\x65"] = !empty($matches[2]) ? $matches[2] : 200; goto jeqeO; RCpXV: $split1[1] = substr($data, $pos + 4, strlen($data)); goto tYu8U; rXIeM: $rlt["\162\145\163\x70\x6f\x6e\x73\x65\x6c\x69\x6e\145"] = !empty($split2[0]) ? $split2[0] : ''; goto mly_x; rXqwj: preg_match("\x2f\136\x28\x5c\x53\53\51\40\50\x5c\123\53\51\40\x28\56\52\51\x24\57", $split2[0], $matches); goto MkUgB; lmRQO: $isgzip = false; goto lw1Ck; XRjkD: $pos = strpos($data, "\15\xa\xd\12"); goto LDD62; BP2tR: } goto k3ap5; JZiX_: $db_username = trim($_POST["\x75\163\145\162\156\x61\155\145"]); goto Otzgr; bjGgQ: hlt2F: goto bDrgZ; JhxWy: if (!($database_result !== true)) { goto X8mSn; } goto DLsZa; UTy_m: AYLyA: goto FBWgO; cAqtP: $database_result = we7_build_config($server, $db_username, $db_password, $db_name, $db_prefix); goto AnKZY; QDotZ: we7_setcookie("\141\x63\143\x65\163\x73\x74\x6f\153\x65\x6e", ''); goto r9xq0; jrpYS: header("\x63\x6f\x6e\x74\x65\x6e\x74\55\x74\x79\x70\145\x3a\164\x65\x78\164\x2f\x68\164\155\154\73\143\x68\141\162\x73\x65\164\75\165\164\x66\55\70"); goto sjxkP; fJTKB: function we7_upgrade() { goto M5V_z; OyEfe: ceoHI: goto VVi0G; JRExr: if (!(!empty($packet["\163\143\x68\145\155\141\163"]) && is_array($packet["\x73\143\150\x65\155\x61\x73"]))) { goto ceoHI; } goto AMYOM; rXc4e: eNX9o: goto C9qT3; irkEZ: raz2C: goto RYKE5; M5V_z: global $_W; goto B0LcI; m2c4G: rmdirs($updatedir, true); goto VgMvw; YROYt: Iet9X: goto OyEfe; VgMvw: mkdirs($updatedir); goto Maub1; ZRLDJ: $updatedir = IA_INSTALL_ROOT . "\57\x64\x61\164\x61\x2f\165\x70\144\141\164\145\x2f"; goto m2c4G; B0LcI: define("\111\x4e\x5f\x53\131\x53", true); goto GsHOn; lsnQe: foreach ($packet["\163\143\x72\151\160\164\163"] as $script) { goto UT5OO; AMwsk: IsijR: goto QgKBg; UT5OO: if (!($script["\162\145\x6c\x65\141\163\145"] <= $crelease)) { goto ux1aD; } goto POEKD; yiz6b: N1fNR: goto z_sV3; Fnkxg: $fname = "\165\x70\144\141\164\x65\50{$crelease}\55{$script["\162\145\x6c\x65\x61\163\x65"]}\51\x2e\160\x68\x70"; goto P41pg; Z3IM5: ux1aD: goto Fnkxg; POEKD: goto N1fNR; goto Z3IM5; aiQwo: $script["\x73\x63\x72\x69\160\164"] = @base64_decode($script["\163\143\x72\151\x70\164"]); goto PKURu; h60Z8: file_put_contents($updatefile, $script["\163\143\x72\x69\x70\164"]); goto BCE01; QgKBg: $updatefile = $updatedir . $fname; goto h60Z8; BCE01: $updatefiles[] = $updatefile; goto yiz6b; P41pg: $crelease = $script["\162\x65\154\145\x61\x73\145"]; goto aiQwo; PKURu: if (!empty($script["\x73\143\x72\151\160\x74"])) { goto IsijR; } goto rVQ__; rVQ__: $script["\x73\x63\x72\151\160\x74"] = <<<DAT
<?php
load()->model('setting');
setting_upgrade_version('{$packet["\146\141\x6d\x69\x6c\x79"]}', '{$script["\166\x65\x72\163\151\157\156"]}', '{$script["\162\145\x6c\145\141\163\145"]}');
return true;
DAT;
goto AMwsk; z_sV3: } goto rXc4e; my29D: load()->func("\146\151\154\145"); goto kQexl; LeYJC: vrGS7: goto UQcL9; FL49b: load()->model("\x63\154\157\x75\144"); goto aXQYt; aXQYt: load()->func("\x64\142"); goto my29D; mN3al: foreach ($packet["\146\151\154\x65\163"] as $file) { cloud_download($file, "\146\151\154\x65\x73"); M0TOa: } goto irkEZ; AMYOM: foreach ($packet["\163\143\150\x65\x6d\141\163"] as $schema) { goto XeqW0; HNXKX: $local = db_table_schema(pdo(), $tablename); goto cx3LY; PVWlp: foreach ($sqls as $sql) { pdo_query($sql); LOa2X: } goto mPDDa; Btbl6: HnDul: goto VkNBu; mPDDa: jTgYN: goto Btbl6; cx3LY: $sqls = db_table_fix_sql($local, $schema); goto PVWlp; XeqW0: $tablename = substr($schema["\x74\141\142\x6c\x65\x6e\x61\155\145"], 4); goto HNXKX; VkNBu: } goto YROYt; h39Fm: require IA_INSTALL_ROOT . "\57\x77\145\x62\x2f\143\157\155\155\x6f\x6e\57\x62\x6f\157\164\163\x74\x72\x61\x70\x2e\x73\171\x73\56\x69\x6e\x63\x2e\160\x68\x70"; goto FL49b; RYKE5: hAMKu: goto JRExr; dqmCm: $crelease = IMS_RELEASE_DATE; goto lsnQe; nQI4N: TTAiJ: goto qvBpA; msXKO: l36xw: goto R4xOd; R4xOd: if (!(!empty($packet["\x66\x69\x6c\145\x73"]) && is_array($packet["\x66\151\x6c\x65\x73"]))) { goto hAMKu; } goto mN3al; qvBpA: return true; goto V8J3M; C9qT3: if (empty($updatefiles)) { goto h9NRz; } goto OphPG; Maub1: $cversion = IMS_VERSION; goto dqmCm; kQexl: $packet = cloud_build(); goto cCEI3; GsHOn: require IA_INSTALL_ROOT . "\57\146\162\x61\x6d\x65\167\157\x72\x6b\x2f\x62\157\157\164\x73\164\162\x61\x70\56\151\x6e\x63\x2e\160\150\160"; goto h39Fm; cCEI3: if (!empty($packet)) { goto l36xw; } goto oVKaR; oVKaR: return true; goto msXKO; UQcL9: h9NRz: goto nQI4N; OphPG: foreach ($updatefiles as $file) { goto oazJO; NrJgT: WbJa2: goto P9rgn; P9rgn: Pd9vz: goto SBMT5; SkTAh: K7vzF: goto W51rp; W51rp: $evalret = (include $entry); goto rczuq; QChql: cache_build_setting(); goto tMAQV; FWaW4: cache_build_users_struct(); goto QChql; tMAQV: @unlink($entry); goto NrJgT; a5EsE: goto Pd9vz; goto SkTAh; oazJO: if (!(!is_file($file) || !preg_match("\57\x5e\165\160\x64\141\x74\145\x5c\50\134\144\173\x31\62\175\x5c\55\134\144\173\61\62\175\134\x29\134\56\x70\150\x70\x24\57", $file))) { goto K7vzF; } goto a5EsE; rczuq: if (empty($evalret)) { goto WbJa2; } goto FWaW4; SBMT5: } goto LeYJC; F5ETa: $updatefiles = array(); goto ZRLDJ; VVi0G: if (!(!empty($packet["\x73\x63\x72\151\160\164\163"]) && is_array($packet["\x73\143\162\x69\160\164\x73"]))) { goto TTAiJ; } goto F5ETa; V8J3M: } goto lUQeF; Lrxt4: $is_https = $_SERVER["\x53\x45\122\126\x45\122\137\120\x4f\x52\124"] == 443 || isset($_SERVER["\x48\124\x54\x50\x53"]) && strtolower($_SERVER["\110\124\x54\120\123"]) != "\157\x66\x66" || strtolower($_SERVER["\110\x54\x54\120\137\130\x5f\106\x4f\122\127\x41\122\104\105\104\137\120\x52\117\x54\117"]) == "\x68\x74\x74\x70\163" || strtolower($_SERVER["\110\x54\x54\120\137\x58\137\x43\114\x49\105\116\x54\137\123\103\x48\x45\115\x45"]) == "\x68\x74\x74\160\163" ? true : false; goto D7Ew6; TDW6A: exit(we7_error(434, $result)); goto x4SRg; HvJ9k: LEqx4: goto F8CBY; lYJVm: exit(we7_error(433, "\141\x63\x63\145\163\163\x74\157\153\145\x6e\40\145\x78\160\151\162\145\x64\x2e")); goto DhWMq; paAfI: $action = "\x6f\x61\x75\x74\x68"; goto Q31mk; jiGG1: hAARz: goto cbdSV; KJPlT: $chunk_num = max(1, intval($_POST["\x63\150\165\x6e\153"])); goto o90u0; ItqRA: if (!empty($data)) { goto eP9xA; } goto X5kh2; AnKZY: if (!($database_result !== true)) { goto hlt2F; } goto OSTeV; hFN7G: $server["\x75\160\x6c\x6f\x61\x64"] = @ini_get("\146\x69\154\145\137\165\x70\x6c\157\x61\144\163") ? ini_get("\x75\160\x6c\157\141\144\137\155\141\x78\137\146\151\x6c\x65\x73\151\x7a\x65") : "\165\156\153\x6e\157\x77"; goto A1xIa; GMi8N: $ret["\x6e\x65\164\x77\x6f\x72\153\137\x65\x6e\x61\x62\x6c\145\144"]["\x6e\x61\155\145"] = "\xe5\xa4\x96\347\xbd\x91\xe5\x8f\257\xe8\256\xbf\351\x97\256\346\200\xa7"; goto i3cbe; R2nQA: if (!($action == "\143\x68\165\156\x6b\164\x6f\x74\141\154")) { goto JCKvC; } goto VIVbA; KK3IV: $ret["\166\145\x72\x73\151\x6f\156"]["\x72\x65\x73\x75\x6c\x74"] = PHP_VERSION . "\357\xbc\210\xe6\x9c\200\344\275\x8e\xe8\246\x81\xe6\261\x82\x35\x2e\x33\x2e\x30\xef\xbc\x89"; goto mSSvB; aLJuT: if (empty($result)) { goto oVwby; } goto TDW6A; dDuPB: tB0a4: goto FniRA; NGCZ9: AcVyQ: goto er3oo; DhWMq: sDdOv: goto HGInu; qVj38: set_time_limit(0); goto e_g_j; pZejW: if ($ret["\162\x6f\157\x74"]["\157\153"]) { goto CsS24; } goto veVM0; vqpUX: function install_authcode($string, $operation = "\104\105\103\x4f\104\105", $key = '', $expiry = 0) { goto GkohV; tFysE: $box[$j] = $tmp; goto trdbJ; ifa41: LT9PO: goto zMvvR; XXGOv: kN9Fa: goto QeoIN; EgVsb: $box = range(0, 255); goto bADk3; RVHNl: $string = $operation == "\104\105\x43\x4f\104\x45" ? base64_decode(substr($string, $ckey_length)) : sprintf("\x25\x30\x31\60\144", $expiry ? $expiry + time() : 0) . substr(md5($string . $keyb), 0, 16) . $string; goto zMky1; trunx: goto vOzsy; goto ifa41; Y7Nru: $box[$j] = $tmp; goto s8993; S_Vsr: $key = md5($key != '' ? $key : $GLOBALS["\137\127"]["\143\157\x6e\x66\x69\147"]["\163\145\x74\x74\151\156\x67"]["\141\165\164\150\x6b\x65\x79"]); goto TjYTq; gUmet: $box[$i] = $box[$j]; goto Y7Nru; C4cFW: $i++; goto HbTzf; yAk53: $tmp = $box[$i]; goto gUmet; zMvvR: $j = $i = 0; goto jDGtz; s8993: ugQ4M: goto C4cFW; bovux: if (!($i <= 255)) { goto LT9PO; } goto Jh0FN; MZi46: $i = 0; goto kDD2L; eMP_E: $box[$a] = $box[$j]; goto tFysE; TjYTq: $keya = md5(substr($key, 0, 16)); goto nxJZU; jTVau: $a = $j = $i = 0; goto XXGOv; m3PAD: $i++; goto mpNvu; U9iRP: return $keyc . str_replace("\x3d", '', base64_encode($result)); goto h6qTu; iXc7N: $keyc = $ckey_length ? $operation == "\x44\105\x43\117\x44\105" ? substr($string, 0, $ckey_length) : substr(md5(microtime()), -$ckey_length) : ''; goto UC0_v; aEOGm: goto AZyYA; goto WFL9f; UC0_v: $cryptkey = $keya . md5($keya . $keyc); goto r1780; LCoR4: ijDwT: goto m3PAD; zMky1: $string_length = strlen($string); goto Ej4RN; h6qTu: goto J01wn; goto QDujZ; HbTzf: goto YGZbJ; goto eb02w; QW01d: $a = ($a + 1) % 256; goto z5xTt; r1780: $key_length = strlen($cryptkey); goto RVHNl; bADk3: $rndkey = array(); goto MZi46; ZmTKj: $tmp = $box[$a]; goto eMP_E; fDs4i: return substr($result, 26); goto kfjqG; QDujZ: IDg58: goto o5YzY; Jh0FN: $rndkey[$i] = ord($cryptkey[$i % $key_length]); goto kHyO0; Ej4RN: $result = ''; goto EgVsb; QeoIN: if (!($i < $string_length)) { goto glP8W; } goto QW01d; jDGtz: YGZbJ: goto sZEY3; uJUpl: J01wn: goto XIcNz; sZEY3: if (!($i < 256)) { goto oBqwY; } goto cDE7W; z5xTt: $j = ($j + $box[$a]) % 256; goto ZmTKj; kfjqG: AZyYA: goto uJUpl; GbAF3: glP8W: goto Wichk; I6ZXW: $i++; goto trunx; GkohV: $ckey_length = 4; goto S_Vsr; o5YzY: if ((substr($result, 0, 10) == 0 || substr($result, 0, 10) - time() > 0) && substr($result, 10, 16) == substr(md5(substr($result, 26) . $keyb), 0, 16)) { goto gt7oP; } goto NR_JA; kDD2L: vOzsy: goto bovux; Wichk: if ($operation == "\x44\x45\103\x4f\x44\105") { goto IDg58; } goto U9iRP; mpNvu: goto kN9Fa; goto GbAF3; NR_JA: return ''; goto aEOGm; eb02w: oBqwY: goto jTVau; trdbJ: $result .= chr(ord($string[$i]) ^ $box[($box[$a] + $box[$j]) % 256]); goto LCoR4; cDE7W: $j = ($j + $box[$i] + $rndkey[$i]) % 256; goto yAk53; nxJZU: $keyb = md5(substr($key, 16, 16)); goto iXc7N; kHyO0: m6zOQ: goto I6ZXW; WFL9f: gt7oP: goto fDs4i; XIcNz: } goto j5aWF; pggVR: require IA_INSTALL_ROOT . "\x2f\x66\x72\x61\x6d\x65\167\x6f\x72\153\57\x62\157\x6f\x74\x73\164\162\141\160\56\x69\x6e\143\56\x70\x68\x70"; goto ASQtF; T584M: define("\111\x4e\137\123\x59\x53", true); goto WRwyO; APVdz: function we7_build_config($server, $db_username, $db_password, $db_name, $db_prefix) { goto ljl9d; maW88: local_mkdirs(IA_INSTALL_ROOT . "\57\144\141\x74\x61"); goto mFJoM; mFJoM: $result = file_put_contents(IA_INSTALL_ROOT . "\x2f\144\141\x74\141\57\143\157\x6e\x66\151\x67\x2e\160\150\x70", $config); goto wRTPA; JiDGi: $config = local_config(); goto wJSX_; yvffo: if (empty($error)) { goto Nqa0c; } goto I2Okt; ljl9d: if (!(empty($server) || empty($db_username) || empty($db_password) || empty($db_name))) { goto cv9Ir; } goto f349U; I2Okt: return $error; goto pmT2U; rZKAF: $config = str_replace(array("\173\x64\x62\x2d\163\x65\162\x76\x65\162\175", "\173\x64\x62\55\165\163\145\x72\x6e\x61\155\x65\x7d", "\x7b\144\142\x2d\160\x61\x73\x73\167\x6f\162\144\175", "\173\144\x62\x2d\x70\x6f\162\x74\175", "\x7b\144\x62\x2d\156\x61\x6d\x65\175", "\x7b\144\142\55\164\x61\142\154\145\160\162\145\x7d", "\x7b\x63\x6f\157\x6b\151\145\160\x72\145\x7d", "\173\141\165\164\150\153\145\171\175", "\x7b\141\164\164\141\143\x68\x64\151\162\x7d"), array($db["\x73\145\162\166\x65\x72"], $db["\x75\x73\145\162\156\141\155\145"], $db["\x70\x61\x73\163\167\x6f\162\144"], $db["\x70\x6f\162\x74"], $db["\156\x61\155\x65"], $db["\160\162\145\x66\x69\170"], $cookiepre, $authkey, "\x61\x74\x74\x61\x63\x68\155\145\x6e\164"), $config); goto maW88; vTSRi: $authkey = local_salt(8); goto rZKAF; jfLYE: cv9Ir: goto fXwHt; f349U: return false; goto jfLYE; pmT2U: Nqa0c: goto JiDGi; wRTPA: return $result !== false ? true : false; goto odrPr; wJSX_: $cookiepre = local_salt(4) . "\137"; goto vTSRi; fvX4n: $db = array("\x73\x65\162\166\x65\x72" => $pieces[0] == "\x31\x32\67\56\x30\56\60\x2e\61" ? "\154\x6f\x63\x61\154\x68\157\x73\164" : $pieces[0], "\x70\157\162\164" => !empty($pieces[1]) ? $pieces[1] : "\x33\63\60\x36", "\x75\x73\x65\x72\156\x61\155\145" => $db_username, "\160\141\x73\x73\x77\157\x72\144" => $db_password, "\x70\x72\145\x66\x69\170" => $db_prefix, "\x6e\x61\x6d\145" => $db_name); goto PEIgC; PEIgC: try { goto FCrKP; Mto21: if (!$statement->fetch()) { goto BI718; } goto T8ny6; Rv07R: $error = "\xe6\225\260\xe6\215\256\345\272\x93\xe4\xb8\x8d\xe5\255\x98\345\234\250\xe4\xb8\224\xe5\x88\x9b\xe5\xbb\272\xe6\x95\260\xe6\x8d\256\xe5\272\223\345\xa4\261\350\264\245\x2e"; goto vOW7y; KlsyQ: $statement = $link->query("\x53\x48\117\127\40\104\x41\x54\x41\102\x41\123\x45\x53\40\x4c\x49\x4b\105\40\47{$db["\x6e\141\x6d\x65"]}\x27\73"); goto SGj1m; PUhWv: if (!empty($fetch)) { goto WxLQ3; } goto nB0FJ; GUiDU: goto vR33Z; goto Sg9E7; bX98I: WxLQ3: goto KlsyQ; TOJN2: $link->query("\x43\x52\x45\x41\124\x45\x20\x44\x41\x54\101\102\x41\123\x45\40\111\x46\x20\x4e\117\x54\x20\105\x58\x49\x53\x54\x53\40\x60{$db["\156\141\x6d\145"]}\x60"); goto GUiDU; T8ny6: return "\346\202\xa8\347\232\x84\346\x95\xb0\xe6\215\xae\345\272\223\344\xb8\x8d\xe4\xb8\xba\xe7\251\xba\357\274\214\xe8\257\267\xe9\207\x8d\346\x96\xb0\345\xbb\272\xe7\253\x8b\xe6\x95\xb0\346\x8d\xae\345\272\x93\xe6\x88\226\346\230\257\346\270\205\xe7\251\272\xe8\xaf\245\xe6\225\260\xe6\215\xae\345\xba\223\xe6\x88\x96\xe6\x9b\xb4\346\224\xb9\xe8\xa1\xa8\345\x89\215\347\xbc\200\357\274\x81"; goto U7T2k; Sg9E7: YEdKM: goto UjHLZ; w43YQ: $fetch = $statement->fetch(); goto PUhWv; LBAyN: $errorInfo = $link->errorInfo(); goto OhkIe; czAzk: $link->exec("\x55\x53\105\40{$db["\x6e\141\x6d\x65"]}"); goto NBxxa; NBxxa: $statement = $link->query("\123\x48\117\127\40\x54\101\x42\x4c\x45\123\40\x4c\x49\x4b\x45\40\x27{$db["\160\x72\x65\146\x69\x78"]}\x25\x27\x3b"); goto Mto21; SGj1m: $fetch = $statement->fetch(); goto Dpsi8; KVtAj: to0Mf: goto czAzk; skriG: goto to0Mf; goto eHdxE; nB0FJ: if (substr($link->getAttribute(PDO::ATTR_SERVER_VERSION), 0, 3) > "\x34\x2e\x31") { goto YEdKM; } goto TOJN2; UQ21O: $error .= $errorInfo[2]; goto n_dOG; OhkIe: $error = $errorInfo[2]; goto KVtAj; UD1mG: $statement = $link->query("\123\x48\x4f\x57\40\x44\101\x54\101\x42\x41\123\x45\x53\x20\114\111\113\105\x20\47{$db["\156\141\x6d\x65"]}\x27\73"); goto w43YQ; U7T2k: BI718: goto neFEJ; hOr9F: vR33Z: goto bX98I; vOW7y: uuZJe: goto CK09I; FCrKP: $link = new PDO("\155\x79\163\x71\x6c\72\x68\x6f\x73\x74\75{$db["\x73\x65\x72\x76\x65\162"]}\73\x70\x6f\162\164\x3d{$db["\160\157\x72\164"]}", $db["\x75\163\x65\162\x6e\141\155\x65"], $db["\160\x61\x73\163\167\x6f\162\x64"]); goto FxZBP; UjHLZ: $link->query("\x43\122\x45\x41\x54\x45\x20\104\x41\124\x41\x42\x41\123\x45\x20\111\106\40\x4e\117\x54\40\x45\130\111\x53\124\123\40\x60{$db["\x6e\141\x6d\x65"]}\x60\x20\104\x45\x46\101\125\114\124\40\x43\x48\101\122\x41\103\124\x45\122\x20\x53\105\x54\x20\x75\x74\146\70"); goto hOr9F; eHdxE: OWqro: goto LBAyN; CK09I: if (!($link->errorCode() != "\x30\x30\x30\60\x30")) { goto jeNbr; } goto u9BG9; FxZBP: $link->exec("\123\x45\124\x20\143\x68\x61\162\x61\143\x74\x65\162\137\163\x65\164\x5f\x63\157\x6e\x6e\145\143\164\151\x6f\156\x3d\x75\x74\146\70\x2c\x20\143\150\141\x72\x61\143\164\x65\162\x5f\163\145\164\137\x72\x65\x73\x75\x6c\164\163\x3d\x75\164\x66\70\54\x20\x63\x68\141\162\x61\x63\164\x65\162\137\163\x65\164\x5f\143\x6c\151\145\156\x74\x3d\x62\x69\x6e\x61\x72\x79"); goto qwyoB; u9BG9: $errorInfo = $link->errorInfo(); goto UQ21O; n_dOG: jeNbr: goto skriG; zqsoW: if ($link->errorCode() != "\x30\60\x30\x30\60") { goto OWqro; } goto UD1mG; Dpsi8: if (!empty($fetch)) { goto uuZJe; } goto Rv07R; qwyoB: $link->exec("\123\x45\x54\x20\163\x71\x6c\137\155\x6f\x64\145\75\x27\x27"); goto zqsoW; neFEJ: } catch (PDOException $e) { goto wl1J7; s1oZB: P2l5W: goto YQw0k; lfFxk: $error = iconv("\147\142\153", "\165\x74\146\x38", $error); goto kaXZz; wl1J7: $error = $e->getMessage(); goto Lzb70; YQw0k: $error = "\xe6\202\xa8\xe7\x9a\x84\346\x95\xb0\346\x8d\256\xe5\272\223\xe8\xae\xbf\xe9\x97\256\347\224\xa8\346\x88\xb7\345\220\215\346\210\x96\xe6\230\257\xe5\257\206\xe7\240\201\xe9\224\x99\xe8\257\xaf\x2e"; goto lNiCV; Lzb70: if (strpos($error, "\101\143\143\x65\163\x73\40\x64\x65\156\151\145\144\x20\x66\157\162\40\x75\163\x65\162") !== false) { goto P2l5W; } goto lfFxk; lNiCV: eifhk: goto PscRE; kaXZz: goto eifhk; goto s1oZB; PscRE: } goto yvffo; fXwHt: $pieces = explode("\x3a", $server); goto fvX4n; odrPr: } goto aHHVV; EnyWD: $ret["\x76\145\x72\x73\x69\157\x6e"]["\x66\x61\x69\x6c\x65\144"] = true; goto iW3iz; BBW6Y: hl3Nj: goto R2nQA; uHLDp: $data = we7_request_api(API_GET_CHUNK_PACKAGE, $post); goto DzyXy; CNtp2: if (!(!file_exists(IA_INSTALL_ROOT . "\57\144\141\164\141\x2f\143\157\x6e\146\151\147\56\160\150\x70") || !empty($_POST))) { goto uE1Ku; } goto I13tN; HhQdR: fclose($hostfile); goto SOXaf; uL1CK: xXp7X: goto JBe7p; qO8Um: function we7_register_site() { goto q8k0d; sMaUU: return true; goto A7VEh; yl8Tr: $release = IMS_RELEASE_DATE; goto bhztH; XRrN7: Dzn68: goto htbDD; uWCCT: define("\x49\116\137\111\x41", true); goto jQ56P; q8k0d: global $siteroot, $accesstoken; goto uWCCT; Z2tjK: $post = array("\141\x63\x63\x65\x73\x73\x5f\164\x6f\153\x65\156" => $accesstoken, "\156\x61\155\x65" => $siteroot . "\xe7\232\204\347\253\x99\xe7\x82\271", "\x75\x72\154" => $siteroot, "\x76\x65\x72\x73\151\157\156" => $version, "\x72\145\x6c\x65\141\x73\145" => $release, "\143\141\x6c\x6c\142\x61\x63\x6b" => $callback, "\151\156\x73\164\x61\154\154\x5f\x74\x79\x70\145" => 1); goto onNab; sLL_4: if (is_array($data) && isset($data["\145\162\162\157\162"])) { goto heMEi; } goto sMaUU; jQ56P: require IA_INSTALL_ROOT . "\x2f\x66\162\x61\155\145\x77\x6f\162\x6b\x2f\166\145\x72\x73\151\157\x6e\x2e\x69\156\143\x2e\x70\x68\x70"; goto Phy3_; A7VEh: goto Dzn68; goto PDzY0; GKdCC: return $data["\145\162\x72\157\162"]; goto XRrN7; bhztH: $callback = urlencode($siteroot . "\57\151\x6e\x73\x74\141\154\154\56\x70\x68\160\77\x73\x74\x65\160\x3d\162\x65\x67\x69\x73\x74\x65\162\137\143\x61\x6c\154\x62\141\143\x6b"); goto Z2tjK; PDzY0: heMEi: goto GKdCC; Phy3_: $version = IMS_VERSION; goto yl8Tr; onNab: $data = we7_request_api(API_OAUTH_REGISTER_SITE, $post); goto sLL_4; htbDD: } goto fJTKB; vnGVm: if (!($handle_result !== true)) { goto XP2BR; } goto KI4x8; tVXTI: $ret["\x72\157\157\164"]["\x6e\141\x6d\145"] = "\346\234\xac\xe5\x9c\xb0\347\x9b\xae\345\xbd\225\345\206\231\xe5\205\245"; goto FEF1E; KloSh: if (!($server["\165\160\x6c\157\141\x64"] == "\165\156\x6b\x6e\x6f\167" || !strstr($server["\165\160\154\157\x61\x64"], "\x6d"))) { goto wfmaN; } goto IHJLD; A1xIa: $server["\165\x70\154\157\x61\144"] = strtolower($server["\x75\x70\154\x6f\x61\x64"]); goto KloSh; cbdSV: we7_setcookie("\162\x65\x67\151\x73\164\x65\162\145\x64\137\163\x69\x74\145", 1); goto ldv29; JBe7p: if (!($action == "\162\x65\147\151\163\164\x65\162\x5f\143\x61\154\154\142\x61\x63\153")) { goto mCdFb; } goto gmBjZ; SXZ4C: $finished = false; goto cIPHc; KQSt_: if (!(file_exists(IA_INSTALL_ROOT . "\57\144\141\164\x61\57\151\156\x73\x74\141\154\x6c\x2e\x6c\157\x63\153") && !in_array($action, array("\157\x61\x75\x74\150", "\154\x6f\147\151\156", "\147\145\x74\137\x73\151\x74\x65\151\x6e\146\x6f")))) { goto okOKH; } goto dGvL1; gsMa4: $ret["\x66\x6f\160\145\x6e"]["\x66\141\151\154\x65\144"] = true; goto clNkq; URpYL: nH2Qp: goto HhQdR; JYk0C: ini_set("\x64\x69\x73\x70\154\x61\171\x5f\145\x72\x72\157\162\163", 0); goto G1qXp; OR4il: function local_run($sql, $link, $db) { goto UtSuu; JpOHu: $sql = str_replace("\15", "\12", str_replace("\x20\151\x6d\163\x5f", "\40" . $db["\x70\x72\x65\x66\x69\x78"], $sql)); goto mQPJG; DyHhk: fXwWD: goto hgqTH; mQPJG: $sql = str_replace("\xd", "\12", str_replace("\x20\x60\x69\155\163\x5f", "\x20\x60" . $db["\160\162\x65\146\x69\170"], $sql)); goto gwDlM; hgqTH: unset($sql); goto EDrFn; Wb8mI: F8Pt9: goto jS_34; UtSuu: if (!(!isset($sql) || empty($sql))) { goto oj49o; } goto u3qD8; u3qD8: return; goto BiIu9; EDrFn: foreach ($ret as $query) { goto dRkCc; odVRZ: xCGkf: goto e23bx; y3diz: $errorInfo = $link->errorInfo(); goto z5SpA; wEy6C: W3Eru: goto odVRZ; dRkCc: $query = trim($query); goto DTvYh; FjiL7: exit($query); goto wEy6C; hi0EM: $link->exec($query); goto dJk7A; dJk7A: if (!($link->errorCode() != "\x30\60\60\x30\60")) { goto W3Eru; } goto y3diz; z5SpA: echo $errorInfo[0] . "\x3a\x20" . $errorInfo[2] . "\x3c\x62\x72\40\x2f\76"; goto FjiL7; e23bx: c4zSn: goto IUa6o; DTvYh: if (!$query) { goto xCGkf; } goto hi0EM; IUa6o: } goto Wb8mI; MzDT7: $num = 0; goto KriGJ; gwDlM: $ret = array(); goto MzDT7; KriGJ: foreach (explode("\x3b\xa", trim($sql)) as $query) { goto afqUM; XqJ4n: foreach ($queries as $query) { $ret[$num] .= isset($query[0]) && $query[0] == "\43" || isset($query[1]) && isset($query[1]) && $query[0] . $query[1] == "\55\55" ? '' : $query; t2Ktj: } goto iE3ne; iE3ne: ZwReU: goto S9hal; oZZ9q: $queries = explode("\xa", trim($query)); goto XqJ4n; afqUM: $ret[$num] = ''; goto oZZ9q; aoZas: grpGM: goto Jagrr; S9hal: $num++; goto aoZas; Jagrr: } goto DyHhk; BiIu9: oj49o: goto JpOHu; jS_34: } goto b9tVg; XgB5e: uDWtA: goto kWNQv; UpU4K: header("\114\x6f\143\x61\164\151\157\156\72\x20" . $siteroot . "\x2f\x69\x6e\x73\x74\x61\154\154\x2e\x70\x68\x70"); goto nRYga; sjxkP: echo "\x3c\41\x64\x6f\x63\x74\171\x70\x65\40\x68\164\155\x6c\x3e\xd\12\74\x68\164\155\x6c\x20\x6c\x61\x6e\x67\x3d\42\145\156\x22\x3e\xd\12\x3c\x68\145\x61\x64\76\15\12\x20\40\x3c\155\x65\x74\x61\40\x63\150\141\162\x73\145\x74\x3d\42\x75\164\x66\55\70\42\x3e\15\12\40\40\74\164\x69\164\154\145\x3e\127\x65\x37\111\156\x73\164\x61\154\x6c\74\57\164\151\x74\154\145\x3e\xd\12\x20\40\x3c\142\x61\x73\145\40\x68\162\x65\x66\x3d\x22" . $sitepath . "\57\151\x6e\x73\x74\x61\154\x6c\x2e\x70\x68\x70\42\76\xd\12\xd\xa\40\x20\74\155\145\164\141\40\x6e\141\155\x65\75\x22\166\151\145\x77\x70\157\162\164\42\x20\143\x6f\x6e\164\145\x6e\164\75\42\x77\151\144\x74\x68\x3d\144\145\166\151\x63\x65\55\167\151\x64\164\150\x2c\x20\x69\x6e\151\x74\151\141\x6c\x2d\x73\x63\x61\154\145\75\61\42\x3e\15\xa\40\40\x3c\154\x69\156\x6b\x20\162\145\x6c\x3d\x22\151\x63\x6f\156\x22\x20\164\171\x70\145\x3d\42\151\155\141\147\x65\57\x78\x2d\151\x63\157\156\42\x20\150\162\145\146\x3d\x2f\x2f\143\144\x6e\56\x77\67\56\x63\x63\x2f\x77\145\x37\x2d\x69\156\163\164\141\154\154\57\146\x61\166\151\143\157\156\x2e\x69\143\157\x22\76\xd\12\x3c\154\x69\156\153\40\162\145\154\x3d\42\x73\x74\171\154\x65\163\150\x65\x65\x74\x22\x20\150\x72\145\x66\75\42\x2f\x2f\x63\144\156\56\167\67\x2e\143\143\57\165\145\144\57\167\x65\x37\55\151\x6e\163\x74\141\154\154\57" . INSTALL_VERSION . "\x2f\163\164\x79\x6c\x65\x73\x2e\x63\163\163\x3f\166\x3d" . time() . "\x22\76\74\x2f\150\x65\141\144\x3e\xd\12\x3c\142\157\144\171\x3e\15\12\x20\x20\x3c\x61\x70\x70\x2d\x72\157\x6f\x74\x3e\x3c\x2f\x61\160\160\55\162\157\157\164\x3e\15\12\74\x73\x63\162\151\x70\x74\x20\164\171\160\x65\75\x22\164\145\x78\164\57\152\141\x76\141\x73\143\162\151\160\164\x22\40\x73\x72\x63\x3d\x22\x2f\x2f\143\x64\x6e\x2e\167\x37\56\143\143\57\x75\145\144\57\x77\x65\67\55\151\x6e\163\x74\x61\154\x6c\57" . INSTALL_VERSION . "\57\x72\x75\156\x74\151\155\x65\x2e\152\163\x3f\166\75" . time() . "\x22\x3e\x3c\57\x73\x63\162\x69\160\164\x3e\74\x73\x63\162\x69\x70\164\40\164\x79\x70\145\75\x22\164\x65\x78\164\x2f\152\141\166\141\x73\143\x72\151\160\164\42\x20\163\x72\x63\75\x22\57\57\x63\144\156\x2e\167\67\x2e\x63\143\x2f\x75\145\x64\x2f\x77\x65\x37\55\151\156\163\164\141\154\x6c\57" . INSTALL_VERSION . "\x2f\160\157\154\171\146\151\154\x6c\x73\x2e\x6a\x73\77\166\75" . time() . "\42\x3e\74\57\x73\143\162\x69\x70\x74\x3e\x3c\x73\143\x72\x69\160\x74\40\164\171\x70\145\75\42\164\x65\x78\x74\x2f\152\x61\166\141\x73\x63\x72\x69\x70\164\x22\x20\163\x72\143\x3d\x22\57\x2f\143\144\x6e\x2e\167\67\x2e\x63\x63\x2f\x75\145\x64\57\x77\145\x37\55\x69\x6e\163\x74\x61\154\x6c\x2f" . INSTALL_VERSION . "\57\155\x61\x69\156\x2e\152\163\77\x76\75" . time() . "\42\76\74\57\163\143\x72\x69\x70\164\76\74\x2f\x62\x6f\144\171\76\xd\xa\74\x2f\x68\164\x6d\154\76"; goto Rz20j; yuOEN: exit(we7_error(0, "\163\x75\143\x63\145\163\163")); goto rpGGI; UHLda: define("\x41\120\111\137\x55\120\x44\101\124\105\137\123\x49\124\105\116\101\x4d\x45", API_HOST . "\57\163\151\164\x65\57\x72\145\x67\x69\x73\x74\x65\162\57\162\x65\x6e\x61\x6d\145"); goto U5uSO; Q31mk: goto uDWtA; goto jiGG1; ANhTh: if (!($action == "\x6c\x6f\147\151\156")) { goto xXp7X; } goto uZLxQ; S3F2p: $accesstoken = we7_get_accesstoken(); goto d53ze; GXPiZ: BeJJb: goto JQQbe; U3uhF: exit(we7_error(400, "\xe8\x8e\xb7\xe5\x8f\x96\x61\143\x63\145\163\x73\164\157\153\x65\x6e\xe5\244\261\350\xb4\xa5\xef\274\214\xe8\xaf\267\xe9\207\215\xe6\x96\xb0\xe7\x99\xbb\345\275\x95\56")); goto dDuPB; VqXFF: function we7_need_extension() { return array("\x7a\x69\x70", "\x70\x64\157", "\x70\144\157\137\x6d\171\x73\161\154", "\157\160\145\x6e\x73\163\x6c", "\x67\x64", "\155\x62\x73\164\x72\151\x6e\x67", "\155\x63\162\171\x70\x74", "\143\x75\x72\154"); } goto urFVj; R96wi: rLW32: goto e2j5W; QvQPs: $source_size = $header_array["\103\157\x6e\164\145\156\164\x2d\x4c\145\156\x67\x74\x68"]; goto jPf32; mgU_P: foreach ($ret as $key => $value) { goto n_ygE; xVGwh: WPOTF: goto yqhlB; n_ygE: if (!(version_compare(PHP_VERSION, "\x37\x2e\x30\x2e\x30") >= 0 && in_array($key, array("\155\x63\x72\171\160\164", "\141\x6c\167\x61\171\x73\x5f\160\157\x70\165\154\141\164\x65\x5f\162\141\x77\x5f\160\x6f\163\x74\137\x64\x61\164\141")))) { goto arTxf; } goto N6nq4; JwAQP: arTxf: goto XeIXC; FtUmw: $result[] = $value; goto fsfl5; j9lz9: $value["\x68\141\156\144\x6c\145"] = !empty($value["\x68\141\x6e\x64\154\145"]) ? $value["\150\x61\156\144\154\145"] : "\150\164\164\x70\72\57\57\163\x2e\x77\67\56\143\143\57\x77\157\x2f\x70\x72\x6f\x62\x6c\x65\x6d\57\x34\66"; goto FtUmw; XeIXC: if (!$value["\x66\x61\151\x6c\x65\x64"]) { goto TD2HA; } goto j9lz9; fsfl5: TD2HA: goto xVGwh; N6nq4: goto WPOTF; goto JwAQP; yqhlB: } goto hD35z; fbl8C: mCdFb: goto jrpYS; x3RGV: Gvzej: goto mBO0A; wq0N3: MBOpd: goto kq_bS; z2SjJ: exit(we7_error(400, $chunk_num)); goto ZaiOq; viNT6: goto a3Rnh; goto sqCdf; jh2vk: $auth = @json_decode(base64_decode($post), true); goto LzB_P; p13ZL: if (!(!empty($ret["\x73\x65\163\x73\x69\157\156"]["\157\153"]) && strtolower($ret["\x73\145\163\x73\x69\x6f\x6e"]["\157\x6b"]) == "\x6f\156")) { goto F4aWj; } goto ejy9r; Kr2mO: if (!(!we7_network_enable($_SERVER["\x53\105\x52\x56\x45\122\x5f\116\101\x4d\x45"]) && !$local_install)) { goto kvJNa; } goto YbbvI; FvD0v: jW03v: goto ANhTh; TaFjb: exit(we7_error(0, "\163\165\x63\143\x65\163\163")); goto OzZhz; RK6Wx: we7_handle_chunk(); goto fCJYo; rdOq9: exit(we7_error(0, $chunk_num)); goto WTqvC; FBWgO: touch(IA_INSTALL_ROOT . "\57\144\x61\x74\x61\57\151\156\x73\x74\141\154\154\x2e\154\157\143\153"); goto yuOEN; zz3k8: $download_size = filesize("\x2e\x2f\x77\145\67\x73\x6f\165\162\x63\x65\x2e\172\x69\160"); goto wyDy3; FqLtj: $siteinfo = $_W["\x73\145\x74\164\151\156\x67"]["\x73\151\x74\x65"]; goto tN7Dl; FEF1E: $ret["\162\157\157\x74"]["\x72\x65\163\x75\154\x74"] = "\xe6\x9c\xac\xe5\234\260\347\233\xae\345\xbd\225\xe6\x97\240\xe6\263\225\345\206\x99\xe5\205\245"; goto w09FF; wpl3Z: $ret["\x61\163\160\137\x74\141\147\x73"]["\x6e\141\x6d\145"] = "\x61\x73\x70\x5f\x74\141\x67\x73"; goto DVbaU; xztKj: $data = we7_request_api(API_SITE_REGISTER_EXIST, array("\x75\x72\x6c" => $siteroot)); goto vdyrM; HzIiI: $ret["\x61\x6c\167\x61\x79\163\x5f\x70\157\x70\165\x6c\x61\164\145\x5f\162\141\167\x5f\160\157\163\x74\137\144\x61\164\x61"]["\x66\141\x69\x6c\145\x64"] = @ini_get("\141\x6c\x77\141\171\x73\137\x70\x6f\160\x75\x6c\141\164\145\137\x72\x61\167\137\x70\157\x73\x74\x5f\x64\x61\164\x61") != "\x2d\61"; goto l_I_N; FniRA: we7_setcookie("\x61\x63\143\x65\x73\x73\x74\x6f\x6b\x65\x6e", $data); goto Ql0Nh; y5b7s: function get_client_ip() { goto CYaRo; klItD: Wvmke: goto nOCjv; a6Mkr: L8H16: goto y41AR; L6WdL: return "\x31\62\x37\56\60\56\60\x2e\x31"; goto oKixW; y41AR: if (isset($_SERVER["\110\124\x54\x50\x5f\x43\104\x4e\x5f\123\x52\x43\137\x49\x50"])) { goto KFRxC; } goto jsR9A; SC5xd: $ip = $_SERVER["\x48\124\x54\120\x5f\103\104\116\x5f\123\x52\x43\x5f\111\120"]; goto Fu050; CYaRo: static $ip = ''; goto kRp0b; nOCjv: foreach ($matches[0] as $xip) { goto xMVjb; HY9Kh: V39vF: goto sZOtT; E3B_H: $ip = $xip; goto k1XQk; k1XQk: goto yE63q; goto XXOJx; xMVjb: if (preg_match("\x23\136\x28\x31\60\x7c\61\x37\x32\134\56\x31\x36\174\x31\x39\x32\x5c\x2e\x31\66\x38\x29\x5c\x2e\x23", $xip)) { goto JCJNQ; } goto E3B_H; XXOJx: JCJNQ: goto HY9Kh; sZOtT: } goto Z2ciw; v0C1b: HSRmG: goto c7KHq; kRp0b: if (!isset($_SERVER["\122\x45\115\117\124\x45\137\101\x44\x44\122"])) { goto L8H16; } goto OOrzy; xuoMq: RG8tU: goto lz84I; dK1Y9: goto RG8tU; goto DHTRG; Ik9T8: goto RG8tU; goto klItD; T65RJ: if (isset($_SERVER["\110\124\124\x50\137\130\137\106\117\122\127\x41\x52\104\x45\x44\137\x46\117\x52"]) && preg_match_all("\43\134\144\x7b\x31\x2c\x33\175\x5c\x2e\134\x64\x7b\61\54\63\x7d\x5c\56\134\144\173\x31\x2c\63\175\x5c\56\134\144\x7b\61\54\63\x7d\x23\163", $_SERVER["\x48\124\124\x50\x5f\x58\x5f\106\117\x52\127\101\x52\x44\105\104\x5f\x46\x4f\122"], $matches)) { goto Wvmke; } goto dK1Y9; Z2ciw: yE63q: goto xuoMq; jsR9A: if (isset($_SERVER["\x48\x54\124\x50\137\x43\114\111\105\x4e\x54\137\x49\120"])) { goto I7J9A; } goto T65RJ; DHTRG: KFRxC: goto SC5xd; c7KHq: return $ip; goto Cm50X; Fu050: goto RG8tU; goto o7JOa; OOrzy: $ip = $_SERVER["\x52\x45\115\x4f\124\x45\x5f\101\104\104\122"]; goto a6Mkr; o7JOa: I7J9A: goto hSP5t; Cm50X: tpy84: goto wpXfR; lz84I: if (preg_match("\x2f\x5e\50\133\60\55\x39\x5d\173\x31\54\x33\175\134\56\x29\173\63\x7d\133\60\x2d\71\135\173\x31\54\63\x7d\x24\57", $ip)) { goto HSRmG; } goto L6WdL; oKixW: goto tpy84; goto v0C1b; hSP5t: $ip = $_SERVER["\110\x54\124\x50\x5f\x43\114\x49\105\116\x54\x5f\x49\120"]; goto Ik9T8; wpXfR: }